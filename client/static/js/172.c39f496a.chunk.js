"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[172],{9172:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var i=n(9060),o=n(8960),r=n(9e3),s=n(5548),a=n(6880),c=n(1712),l=n(3692),d=n(1584),u=n(3358),x=n(6768),h=n(5084),p=n(2496);function f(e){let{onRefresh:t,onFilter:n}=e;return(0,p.jsx)(x.c,{sx:{height:96,display:"flex",justifyContent:"flex-end",p:e=>e.spacing(0,1,0,3)},children:(0,p.jsxs)(o.c,{direction:"row",children:[(0,p.jsx)(u.c,{title:"Filter",children:(0,p.jsx)(s.c,{onClick:n,children:(0,p.jsx)(h.ov,{icon:"fluent:filter-20-filled"})})}),(0,p.jsx)(u.c,{title:"Refresh",children:(0,p.jsx)(s.c,{onClick:t,children:(0,p.jsx)(h.ov,{icon:"mdi:refresh"})})})]})})}var m=n(4296),v=n(4194),b=n(4480),g=n(3540),j=n(7976);const w=(0,i.lazy)((()=>Promise.all([n.e(448),n.e(45),n.e(848)]).then(n.bind(n,3848)))),C=(0,i.lazy)((()=>Promise.resolve().then(n.bind(n,8188))));function S(e,t){if(t)return e&&[m.QJ.Superuser,m.QJ.Director].includes(e)?void 0:parseInt(t)}function k(){const e=(0,v.eu)("up","lg","xl"),{office:t,role:n}=(0,v.Cq)((e=>e.auth)),[u,x]=(0,i.useState)(!1),[m,k]=(0,i.useState)(!1),[D,R]=(0,i.useState)([]),[y,I]=(0,i.useState)(null),[W,M]=(0,i.useState)(new Date),[E,G]=(0,i.useState)(new Date),{data:O,error:N,refetch:T}=(0,b.U)(j.UJ,{variables:{officeId:S(n,t),date:new Date(W).toISOString()}}),[P,{error:L}]=(0,g.c)(j.cx);(0,i.useEffect)((()=>{T({officeId:S(n,t),date:new Date(W).toISOString()})}),[W,n,t,T]);const U=(0,i.useMemo)((()=>O?O.getEvents.filter((e=>e.type&&D.includes(e.type)||0===D.length)):[]),[O,D]),_=()=>{x(!u),I(null),T({officeId:S(n,t),date:new Date(W).toISOString()})};return(0,p.jsxs)(c.c,{children:[(0,p.jsxs)(o.c,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,p.jsxs)(o.c,{direction:"row",alignItems:"center",justifyContent:"start",children:[(0,p.jsx)(s.c,{onClick:e=>{const t=new Date(W);t.setMonth(t.getMonth()-1),M(t)},children:(0,p.jsx)(h.ov,{icon:"uil:arrow-left"})}),(0,p.jsx)(a.c,{variant:"h4",children:new Date(W).toLocaleDateString(void 0,{month:"short",year:"numeric"}).toUpperCase()}),(0,p.jsx)(s.c,{onClick:e=>{const t=new Date(W);t.setMonth(t.getMonth()+1),M(t)},children:(0,p.jsx)(h.ov,{icon:"uil:arrow-right"})})]}),(0,p.jsxs)(o.c,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:[void 0===S(n,t)&&(0,p.jsx)(r.c,{onClick:_,variant:"contained",color:"inherit",startIcon:(0,p.jsx)(h.ov,{icon:"eva:plus-fill"}),children:"Create"}),(0,p.jsx)(d.gf,{document:(0,p.jsx)(h._M,{events:U,currentDate:W}),fileName:"".concat(new Date(W).toLocaleDateString(void 0,{month:"short",year:"numeric"}).toUpperCase(),".pdf"),children:t=>{let{url:n}=t;return n&&(e?(0,p.jsx)(r.c,{variant:"outlined",onClick:()=>window.open(n,"_blank"),startIcon:(0,p.jsx)(h.ov,{icon:"ant-design:export-outlined"}),sx:{color:"black",borderColor:"black"},children:"Export"}):(0,p.jsx)(r.c,{variant:"outlined",onClick:()=>window.open(n,"_blank"),sx:{color:"black",borderColor:"black"},children:(0,p.jsx)(h.ov,{icon:"ant-design:export-outlined"})}))}})]})]}),(0,p.jsxs)(l.c,{children:[(0,p.jsx)(f,{onRefresh:()=>T(),onFilter:()=>k(!m)}),(0,p.jsx)(h.Yf,{events:U,officeId:S(n,t),currentDate:W,selectedDate:E,onSelectDate:e=>G(e),onEditEvent:(e,t)=>{I(t),x(!0)},onDeleteEvent:async(e,i)=>{await P({variables:{id:i}}),T({officeId:S(n,t),date:new Date(W).toISOString()})}})]}),(0,p.jsx)(h.c1,{children:(0,p.jsx)(C,{open:m,selected:D,onFilter:e=>{const t=D.indexOf(e);let n=[];-1===t?n=n.concat(D,e):0===t?n=n.concat(D.slice(1)):t===D.length-1?n=n.concat(D.slice(0,-1)):t>0&&(n=n.concat(D.slice(0,t),D.slice(t+1))),R(n)},onClose:()=>k(!m),onClear:()=>R([]),filters:[{name:"Types",options:[{label:"Event",value:"EVENT"},{label:"HR Report",value:"HR_REPORT"},{label:"Admin Report",value:"ADMIN_REPORT"},{label:"Document",value:"DOCUMENT"}]}]})}),(0,p.jsx)(h.c1,{children:(0,p.jsx)(w,{eventId:y,selectedDate:E,open:u,onClose:_})}),(0,p.jsx)(h.wR,{severity:"error",message:(null===N||void 0===N?void 0:N.message)||(null===L||void 0===L?void 0:L.message)})]})}},1712:(e,t,n)=>{n.d(t,{c:()=>C});var i=n(5656),o=n(5072),r=n(9060),s=n(9736),a=n(5336),c=n(3448),l=n(1412),d=n(3596),u=n(7736),x=n(4276),h=n(2496);const p=["className","component","disableGutters","fixed","maxWidth","classes"],f=(0,x.c)(),m=(0,u.c)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,a.c)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),v=e=>(0,d.c)({props:e,name:"MuiContainer",defaultTheme:f});var b=n(5832),g=n(2556),j=n(3456);const w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=m,useThemeProps:n=v,componentName:d="MuiContainer"}=e,u=t((e=>{let{theme:t,ownerState:n}=e;return(0,o.c)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const i=n,o=t.breakpoints.values[i];return 0!==o&&(e[t.breakpoints.up(i)]={maxWidth:"".concat(o).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,o.c)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})})),x=r.forwardRef((function(e,t){const r=n(e),{className:x,component:f="div",disableGutters:m=!1,fixed:v=!1,maxWidth:b="lg"}=r,g=(0,i.c)(r,p),j=(0,o.c)({},r,{component:f,disableGutters:m,fixed:v,maxWidth:b}),w=((e,t)=>{const{classes:n,fixed:i,disableGutters:o,maxWidth:r}=e,s={root:["root",r&&"maxWidth".concat((0,a.c)(String(r))),i&&"fixed",o&&"disableGutters"]};return(0,l.c)(s,(e=>(0,c.cp)(t,e)),n)})(j,d);return(0,h.jsx)(u,(0,o.c)({as:f,ownerState:j,className:(0,s.c)(w.root,x),ref:t},g))}));return x}({createStyledComponent:(0,g.cp)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,b.c)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,j.c)({props:e,name:"MuiContainer"})}),C=w}}]);
//# sourceMappingURL=172.c39f496a.chunk.js.map