"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[828],{447:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(9060),i=n(7256),l=n(272),a=n(3692),o=n(8960),c=n(9e3),s=n(4380),u=n(6880),d=n(5548),f=n(3996),v=n(1552),h=n(9572),m=n(3288),g=n(9872),p=n(4194),x=n(2148),y=n(5084),b=n(4480),j=n(3540),C=n(9732),I=n(8964),w=n(4296),A=n(2496);function D(){const e=(0,m.c)(),t=(0,p.KX)(),[n,D]=(0,r.useState)(!1),[O,R]=(0,r.useState)({firstName:"",lastName:"",positionId:"",officeId:"",username:"",password:""}),[M,k]=(0,r.useState)(""),[N,S]=(0,r.useState)(null),[E,V]=(0,r.useState)(!1),[F,P]=(0,r.useState)([]),[W,Q]=(0,r.useState)(),{firstName:T,lastName:q,positionId:U,officeId:J,username:z,password:B}=O,{data:K,error:L}=(0,b.U)(I.mq),{data:Z,error:_}=(0,b.U)(I.It),[G,{error:$}]=(0,j.c)(I.uQ),[H,{error:X}]=(0,C.U)(I.GM),[Y,{error:ee}]=(0,C.U)(I.Mz);(0,r.useEffect)((()=>{if(O.officeId&&null!==K&&void 0!==K&&K.getPositions&&null!==Z&&void 0!==Z&&Z.getOffices){const e=Z.getOffices.find((e=>e.id===O.officeId));e&&P(function(e,t){return e.includes("Regional Director")?t.filter((e=>e.role===w.QJ.Director||e.role===w.QJ.Officer)):e.includes("Division")?t.filter((e=>e.role===w.QJ.Chief&&e.label.includes("Chief")||e.role===w.QJ.Officer)):e.includes("Revenue District Office")?t.filter((e=>e.role===w.QJ.Chief&&e.label.includes("District Officer")||e.role===w.QJ.Officer)):t.filter((e=>e.role===w.QJ.Officer))}(e.name,K.getPositions.map((e=>({id:e.id,label:e.label,role:e.role})))))}}),[O.officeId,Z,K]);const te=e=>{R({...O,[e.target.name]:e.target.value})};return(0,A.jsxs)(i.c,{sx:{...(0,x.mo)({color:(0,g.W4)(e.palette.background.default,.5),imgUrl:"/assets/background/overlay_5.jpg"}),height:1},children:[(0,A.jsx)(y.Ml,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),(0,A.jsx)(o.c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:(0,A.jsxs)(a.c,{sx:{p:5,width:1,maxWidth:420},children:[(0,A.jsx)(u.c,{variant:"h4",children:E?"ACCOUNT VERIFICATION":"SIGN UP"}),E?(0,A.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Y({variables:{code:M,contact:z}}).then((e=>{let{data:n}=e;n&&n.confirmAccountVerify?t.push("/login"):Q("Invalid verification code.")})).catch((e=>{Q(e.message)}))},children:[(0,A.jsxs)(u.c,{variant:"body2",sx:{my:2},children:["Verification code was sent to ".concat(z,"."),(0,A.jsx)(c.c,{onClick:e=>{N&&H({variables:{uuid:N,contact:z}}).then((e=>{let{data:t}=e;t&&t.requestAccountVerify&&(V(!0),Q(void 0))})).catch((e=>{Q(e.message)}))},variant:"text",children:"Resend?"})]}),(0,A.jsx)(o.c,{spacing:2,sx:{mb:2},children:(0,A.jsx)(v.o,{length:6,value:M,onComplete:e=>{Y({variables:{code:e,contact:z}}).then((e=>{let{data:n}=e;n&&n.confirmAccountVerify?t.push("/login"):Q("Invalid verification code.")})).catch((e=>{Q(e.message)}))},onChange:e=>k(e)})}),(0,A.jsx)(o.c,{direction:"row",alignItems:"center",justifyContent:"center",sx:{my:2},children:(W||(null===X||void 0===X?void 0:X.message)||(null===ee||void 0===ee?void 0:ee.message))&&(0,A.jsx)(u.c,{variant:"body2",align:"center",color:"error",children:W||(null===X||void 0===X?void 0:X.message)||(null===ee||void 0===ee?void 0:ee.message)})}),(0,A.jsx)(c.c,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:"Verify Account"})]}):(0,A.jsxs)("form",{onSubmit:async e=>{e.preventDefault();let t=null,n=null;if(z.includes("@")){if(!/^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/.test(z))return void Q("Invalid email address.");t=z}else{const e=z.indexOf("9");if(e<0)return void Q("Invalid phone number.");const t=z.substring(e,z.length);if(10!==t.length||!/^\d+$/.test(z))return void Q("Invalid phone number.");n=t}if(!t&&!n)return void Q("Please provide valid email or phone number.");const r=await G({variables:{firstName:T.trim(),lastName:q.trim(),positionId:parseInt(U),officeId:parseInt(J),email:t,phone:n,password:B}});if(r.data&&r.data.createOfficer){const e=r.data.createOfficer.uuid;S(e),H({variables:{uuid:e,contact:z}}).then((e=>{let{data:t}=e;t&&t.requestAccountVerify&&(V(!0),Q(void 0))})).catch((e=>{Q(e.message)}))}else Q("Account already exists.")},children:[(0,A.jsxs)(u.c,{variant:"body2",sx:{my:2},children:["Already have an account?",(0,A.jsx)(l.c,{href:"/login",variant:"subtitle2",sx:{ml:.5,cursor:"pointer"},children:"Sign in"})]}),(0,A.jsxs)(o.c,{spacing:2,sx:{mb:2},children:[(0,A.jsx)(s.c,{name:"firstName",label:"First Name",value:T,onChange:te,required:!0,fullWidth:!0}),(0,A.jsx)(s.c,{name:"lastName",label:"Last Name",value:q,onChange:te,required:!0,fullWidth:!0}),Z&&(0,A.jsx)(s.c,{name:"officeId",select:!0,label:"Office",value:J,onChange:te,required:!0,fullWidth:!0,children:Z.getOffices.map((e=>(0,A.jsx)(f.c,{value:e.id,children:e.name},e.id)))}),K&&(0,A.jsx)(s.c,{name:"positionId",select:!0,label:"Position",value:U,onChange:te,required:!0,fullWidth:!0,children:F.map((e=>(0,A.jsx)(f.c,{value:e.id,children:e.label},e.id)))}),(0,A.jsx)(s.c,{name:"username",label:"Email or Phone Number (+63)",value:z,onChange:te,fullWidth:!0}),(0,A.jsx)(s.c,{name:"password",label:"Password",type:n?"text":"password",value:B,onChange:te,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,A.jsx)(h.c,{position:"end",children:(0,A.jsx)(d.c,{onClick:()=>D(!n),edge:"end",children:(0,A.jsx)(y.ov,{icon:n?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),(0,A.jsx)(o.c,{direction:"row",alignItems:"center",justifyContent:"center",sx:{my:2},children:(W||(null===L||void 0===L?void 0:L.message)||(null===_||void 0===_?void 0:_.message)||(null===$||void 0===$?void 0:$.message))&&(0,A.jsx)(u.c,{variant:"body2",align:"center",color:"error",children:W||(null===L||void 0===L?void 0:L.message)||(null===_||void 0===_?void 0:_.message)||(null===$||void 0===$?void 0:$.message)})}),(0,A.jsx)(c.c,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:"Sign up"})]})]})})]})}},1552:(e,t,n)=>{n.d(t,{o:()=>j});var r,i=n(6692),l=n(2496),a=n(9060),o=n(2556),c=n(4380),s=n(7256);const u={TextFieldStyled:(0,o.cp)(c.c)(r||(r=(0,i.c)(["\n  input {\n    text-align: center;\n  }\n"])))},d=e=>(0,l.jsx)(u.TextFieldStyled,{...e}),f="ArrowLeft",v="ArrowRight",h="Backspace",m="Home",g="End";function p(e){return e.join("")}function x(e,t){return[...e,t]}function y(e){const t=a.useRef((()=>{throw new Error("Cannot call an event handler while rendering.")}));return a.useInsertionEffect((()=>{t.current=e})),a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call(t,...r)}),[])}const b=()=>!0,j=a.forwardRef(((e,t)=>{const{value:n="",length:r=4,autoFocus:i=!1,onChange:o,TextFieldsProps:c,onComplete:u,validateChar:j=b,className:C,onBlur:I,...w}=e,A=a.useRef(n),D=y(u),O=y((e=>{const t=e.slice(0,r);return{isCompleted:t.length===r,finalValue:t}}));a.useEffect((()=>{const{isCompleted:e,finalValue:t}=O(A.current);e&&D(t)}),[r,D,O]);const R=function(e,t){return e<=0?[]:Array.from({length:e},t)}(r,((e,t)=>({character:n[t]||"",inputRef:a.createRef()}))),M=e=>R.findIndex((t=>{let{inputRef:n}=t;return n.current===e})),k=()=>R.map((e=>{let{character:t}=e;return t})),N=(e,t)=>{const n=function(e,t,n){return e.map(((e,r)=>t===r?n:e))}(k(),e,t);return p(n)},S=e=>{var t;null===(t=R[e])||void 0===t||null===(t=t.inputRef.current)||void 0===t||t.select()},E=e=>{e+1!==r&&(R[e+1].character?S(e+1):(e=>{var t;null===(t=R[e])||void 0===t||null===(t=t.inputRef.current)||void 0===t||t.focus()})(e+1))},V=(e,t)=>"function"!=typeof j||j(e,t),F=e=>{const t=M(e.target);if(0===t&&e.target.value.length>1){const{finalValue:t,isCompleted:n}=O(e.target.value);return null!==o&&void 0!==o&&o(t),n&&null!==u&&void 0!==u&&u(t),void S(t.length-1)}const n=e.target.value[0]||"";let r=n;r&&!V(r,t)&&(r="");const i=N(t,r);null===o||void 0===o||o(i);const{isCompleted:l,finalValue:a}=O(i);l&&null!==u&&void 0!==u&&u(a),""!==r?i.length-1<t?S(i.length):E(t):""===n&&i.length<=t&&S(t-1)},P=e=>{const t=e.clipboardData.getData("text/plain"),n=e.target,i=R.findIndex((e=>{let{character:t,inputRef:r}=e;return""===t||r.current===n})),l=function(e,t,n){return e.reduce(((e,t,r)=>{const{characters:i,restArrayMerged:l}=e;if(r<n)return{restArrayMerged:l,characters:x(i,t)};const[a,...o]=l;return{restArrayMerged:o,characters:x(i,a||"")}}),{restArrayMerged:t,characters:[]}).characters}(k(),function(e){return e.split("")}(t),i).map(((e,t)=>V(e,t)?e:"")),a=p(l);null===o||void 0===o||o(a);const{isCompleted:c,finalValue:s}=O(a);c?(null!==u&&void 0!==u&&u(s),S(r-1)):S(a.length)};return(0,l.jsx)(s.c,{display:"flex",gap:"20px",alignItems:"center",ref:t,className:"MuiOtpInput-Box ".concat(C||""),...w,children:R.map(((e,t)=>{let{character:r,inputRef:a}=e;const{onPaste:s,onFocus:u,onKeyDown:p,className:x,onBlur:y,...b}="function"==typeof c?c(t)||{}:c||{};return(0,l.jsx)(d,{autoFocus:!!i&&0===t,autoComplete:"one-time-code",value:r,inputRef:a,className:"MuiOtpInput-TextField MuiOtpInput-TextField-".concat(t+1," ").concat(x||""),onPaste:e=>{e.preventDefault(),P(e),null===s||void 0===s||s(e)},onFocus:e=>{e.preventDefault(),e.target.select(),null===u||void 0===u||u(e)},onChange:F,onKeyDown:e=>{(e=>{const t=e.target,n=t.selectionStart,r=t.selectionEnd,i=M(t),l=0===n&&0===r;if(t.value===e.key)e.preventDefault(),E(i);else if(h===e.key)if(t.value){if(l){e.preventDefault();const t=N(i,"");null!==o&&void 0!==o&&o(t),t.length<=i&&S(i-1)}}else e.preventDefault(),S(i-1);else f===e.key?(e.preventDefault(),S(i-1)):v===e.key?(e.preventDefault(),S(i+1)):m===e.key?(e.preventDefault(),S(0)):g===e.key&&(e.preventDefault(),S(R.length-1))})(e),null===p||void 0===p||p(e)},onBlur:e=>{null!==y&&void 0!==y&&y(e),(e=>{if(!R.some((t=>{let{inputRef:n}=t;return n.current===e.relatedTarget}))){const{isCompleted:e,finalValue:t}=O(n);null===I||void 0===I||I(t,e)}})(e)},...b},t)}))})}))},3540:(e,t,n)=>{n.d(t,{c:()=>u});var r=n(7328),i=n(9528),l=n(2200),a=n(3520),o=n(9179),c=n(4056),s=n(3960);function u(e,t){var n=(0,s.y)(null===t||void 0===t?void 0:t.client);(0,o.Y5)(e,o.UT.Mutation);var u=i.useState({called:!1,loading:!1,client:n}),d=u[0],f=u[1],v=i.useRef({result:d,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});Object.assign(v.current,{client:n,options:t,mutation:e});var h=i.useCallback((function(e){void 0===e&&(e={});var t=v.current,n=t.options,i=t.mutation,o=(0,r.C3)((0,r.C3)({},n),{mutation:i}),s=e.client||v.current.client;v.current.result.loading||o.ignoreResults||!v.current.isMounted||f(v.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:s});var u=++v.current.mutationId,d=(0,l.I)(o,e);return s.mutate(d).then((function(t){var n,r,i=t.data,l=t.errors,o=l&&l.length>0?new c._M({graphQLErrors:l}):void 0,h=e.onError||(null===(n=v.current.options)||void 0===n?void 0:n.onError);if(o&&h&&h(o,d),u===v.current.mutationId&&!d.ignoreResults){var m={called:!0,loading:!1,data:i,error:o,client:s};v.current.isMounted&&!(0,a.y)(v.current.result,m)&&f(v.current.result=m)}var g=e.onCompleted||(null===(r=v.current.options)||void 0===r?void 0:r.onCompleted);return o||null===g||void 0===g||g(t.data,d),t})).catch((function(t){var n;if(u===v.current.mutationId&&v.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:s};(0,a.y)(v.current.result,r)||f(v.current.result=r)}var i=e.onError||(null===(n=v.current.options)||void 0===n?void 0:n.onError);if(i)return i(t,d),{data:void 0,errors:t};throw t}))}),[]),m=i.useCallback((function(){if(v.current.isMounted){var e={called:!1,loading:!1,client:n};Object.assign(v.current,{mutationId:0,result:e}),f(e)}}),[]);return i.useEffect((function(){return v.current.isMounted=!0,function(){v.current.isMounted=!1}}),[]),[h,(0,r.C3)({reset:m},d)]}}}]);
//# sourceMappingURL=828.ed45fccb.chunk.js.map