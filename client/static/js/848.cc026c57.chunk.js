"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[848],{3848:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var i=t(9060),a=t(2656),l=t(6773),s=t(4488),r=t(7667),c=t(9572),d=t(9e3),o=t(5548),u=t(2112),h=t(3358),p=t(5448),m=t(8960),x=t(8320),v=t(3996),g=t(7868),j=t.n(g),f=t(8372),b=t(5084),y=t(7976),I=t(4480),D=t(9732),E=t(3540),w=t(2496);const S={reportId:"",subject:"",image:"",description:"",frequency:"NONE"};function C(e){let{eventId:n,selectedDate:t,open:g,onClose:C}=e;const{data:q,error:N}=(0,I.U)(y.ei),[O,{error:R}]=(0,D.U)(y.wP,{fetchPolicy:"no-cache"}),[W,k]=(0,i.useState)(null),[A,B]=(0,i.useState)(S),[F,P]=(0,i.useState)(j()(t)),[T,Y]=(0,i.useState)(j()(t)),[U,L]=(0,i.useState)(j()(t)),{subject:M,description:H,frequency:K,reportId:Q}=A,[V,{error:z}]=(0,E.c)(y.Ki),[G,{error:J}]=(0,E.c)(y.cn),[X,{error:Z}]=(0,E.c)(y.cQ);(0,i.useEffect)((()=>{n?O({variables:{id:n}}).then((e=>{let{data:n}=e;n&&(B({subject:n.getEventById.subject,description:n.getEventById.description,frequency:n.getEventById.frequency,image:n.getEventById.image,reportId:""}),P(j()(new Date(n.getEventById.date))))})):(B(S),P(j()(new Date)))}),[n,O]),(0,i.useEffect)((()=>{P(j()(t)),Y(j()(t)),L(j()(t))}),[t]);const $=e=>{B({...A,[e.target.name]:e.target.value})};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.c,{open:g,onClose:C,maxWidth:"sm",fullWidth:!0,children:(0,w.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),Q)await X({variables:{reportId:parseInt(Q),localDue:T.toISOString(),nationalDue:U.toISOString()}});else{let e=null;if(W){const n=new FormData;n.append("files",W);const t=await f.c.post("https://rr6manila.com/api/upload",n);if(t.data){e=t.data.files[0].fileUrl}}n?await G({variables:{id:n,subject:M,description:H,image:e,date:F.toISOString(),frequency:K}}):await V({variables:{subject:M,description:H,image:e,date:F.toISOString(),frequency:K}})}B(S),P(j()(new Date(t))),Y(j()(new Date(t))),L(j()(new Date(t))),C()},children:[n?(0,w.jsx)(l.c,{children:"Edit Event"}):(0,w.jsx)(u.c,{sx:{pt:2},children:"ADD EVENT"}),(0,w.jsxs)(s.c,{children:[(0,w.jsxs)(p.cp,{container:!0,spacing:3,children:[(0,w.jsx)(p.cp,{item:!0,xs:12,children:(0,w.jsx)(x.c,{name:"subject",label:"Event Name",variant:"outlined",value:M,onChange:$,fullWidth:!0,required:!Q})}),(0,w.jsx)(p.cp,{item:!0,xs:12,children:(0,w.jsx)(x.c,{name:"description",label:"Description",variant:"outlined",value:H,onChange:$,fullWidth:!0,required:!Q,helperText:(null===W||void 0===W?void 0:W.name)||A.image,InputProps:{endAdornment:(0,w.jsx)(c.c,{position:"end",children:(0,w.jsx)(h.c,{title:"Attach Image",children:(0,w.jsxs)(o.c,{component:"label",edge:"end",children:[(0,w.jsx)(b.ov,{icon:"tdesign:image-add"}),(0,w.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&k(e.target.files[0])},style:{display:"none"},hidden:!0})]})})})}})}),(0,w.jsx)(p.cp,{item:!0,xs:12,sm:6,md:6,children:(0,w.jsx)(b.I4,{label:"Event Date",value:F,onChange:e=>{e&&P(e)}})}),(0,w.jsx)(p.cp,{item:!0,xs:12,sm:6,md:6,children:(0,w.jsxs)(x.c,{name:"frequency",select:!0,label:"Frequency",variant:"outlined",value:K,onChange:$,required:!Q,fullWidth:!0,children:[(0,w.jsx)(v.c,{value:"NONE",children:"None"}),(0,w.jsx)(v.c,{value:"MONTHLY",children:"Monthly"}),(0,w.jsx)(v.c,{value:"YEARLY",children:"Yearly"})]})})]}),!n&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.c,{sx:{py:2},children:"OR ADD REPORT"}),(0,w.jsxs)(p.cp,{container:!0,spacing:3,children:[(0,w.jsx)(p.cp,{item:!0,xs:12,children:(0,w.jsx)(x.c,{name:"reportId",select:!0,label:"Report",variant:"outlined",value:Q,onChange:$,required:!!Q,fullWidth:!0,children:q&&q.getReports.map((e=>(0,w.jsx)(v.c,{value:e.id,children:e.name},e.id)))})}),(0,w.jsx)(p.cp,{item:!0,xs:12,sm:6,md:6,children:(0,w.jsx)(b.I4,{label:"Regional Deadline",value:T,onChange:e=>{e&&Y(e)}})}),(0,w.jsx)(p.cp,{item:!0,xs:12,sm:6,md:6,children:(0,w.jsx)(b.I4,{label:"National Deadline",value:U,onChange:e=>{e&&L(e)}})})]})]})]}),(0,w.jsx)(r.c,{children:(0,w.jsxs)(m.c,{direction:"row",spacing:2,children:[(0,w.jsx)(d.c,{onClick:C,color:"inherit",children:"Cancel"}),(0,w.jsx)(d.c,{variant:"contained",color:"inherit",type:"submit",children:"Save"})]})})]})}),(0,w.jsx)(b.wR,{severity:"error",message:(null===z||void 0===z?void 0:z.message)||(null===R||void 0===R?void 0:R.message)||(null===J||void 0===J?void 0:J.message)||(null===N||void 0===N?void 0:N.message)||(null===Z||void 0===Z?void 0:Z.message)})]})}}}]);
//# sourceMappingURL=848.cc026c57.chunk.js.map