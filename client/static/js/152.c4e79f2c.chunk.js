"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[152],{3152:(e,t,i)=>{i.r(t),i.d(t,{default:()=>H,parseType:()=>B});var n=i(9060),s=i(5448),r=i(8960),o=i(9e3),a=i(6880),c=i(1712),l=i(4924),d=i(3692),u=i(7256),h=i(3856),x=i(700),p=i(7454),m=i(9504),g=i(9904),f=i(9592),j=i(3358),v=i(6768),b=i(5548),w=i(5594),S=i(9572),y=i(2496);function C(e){let{filterName:t,onRefresh:i,onFilter:n,onFilterName:s}=e;return(0,y.jsxs)(v.c,{sx:{height:96,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:[(0,y.jsx)(w.c,{value:t,onChange:s,placeholder:"Search...",startAdornment:(0,y.jsx)(S.c,{position:"start",children:(0,y.jsx)(l.ov,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),(0,y.jsxs)(r.c,{direction:"row",children:[(0,y.jsx)(j.c,{title:"Filter",children:(0,y.jsx)(b.c,{onClick:n,children:(0,y.jsx)(l.ov,{icon:"fluent:filter-20-filled"})})}),(0,y.jsx)(j.c,{title:"Refresh",children:(0,y.jsx)(b.c,{onClick:i,children:(0,y.jsx)(l.ov,{icon:"mdi:refresh"})})})]})]})}var R=i(8612),k=i(3248);function I(e){let{order:t,orderBy:i,officeId:n,headLabel:s,onRequestSort:r}=e;return(0,y.jsx)(R.c,{children:(0,y.jsxs)(p.c,{children:[void 0===n&&(0,y.jsx)(x.c,{}),s.map((e=>{return(0,y.jsx)(x.c,{align:e.align||"left",sortDirection:i===e.id&&t,sx:{width:e.width,minWidth:e.minWidth},children:(0,y.jsxs)(k.c,{hideSortIcon:!0,active:i===e.id,direction:i===e.id?t:"asc",onClick:(n=e.id,e=>{r(e,n)}),children:[e.label,i===e.id?(0,y.jsx)(u.c,{sx:{border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var W=i(180),D=i(4480),P=i(8504),G=i(3540),N=i(7976),z=i(8964),E=i(2560);const F=(0,n.lazy)((()=>Promise.resolve().then(i.bind(i,8400)))),M=(0,n.lazy)((()=>Promise.resolve().then(i.bind(i,8188))));function Q(e,t,i){return t[i]<e[i]?-1:t[i]>e[i]?1:0}function O(e){let{officeId:t,onRefresh:i,onView:s,onEdit:r}=e;const{data:o,error:a,refetch:c}=(0,D.U)(N.Wq,{variables:{officeId:t}}),{data:l,error:j}=(0,P.Q)(z.G2),[v,b]=(0,n.useState)(!1),[w,S]=(0,n.useState)([]),[R,k]=(0,n.useState)(0),[O,T]=(0,n.useState)("desc"),[A,L]=(0,n.useState)("id"),[V,q]=(0,n.useState)(""),[H,J]=(0,n.useState)(10),[U,_]=(0,n.useState)([]),[K,{error:X}]=(0,G.c)(N.Sg);(0,n.useEffect)((()=>{o&&_(o.getSubmittedReports.map((e=>({id:parseInt(e.id),name:e.report.name,basis:e.report.basis,type:B(e.report.type),localDue:e.localDue,nationalDue:e.nationalDue,status:(0,E.SI)(e.status),reportId:parseInt(e.report.id),pending:e.pending}))))}),[o]),(0,n.useEffect)((()=>{l&&c()}),[l,c]);const Y=(0,n.useMemo)((()=>function(e,t){const i=e.map(((e,t)=>[e,t]));return i.sort(((e,i)=>{const n=t(e[0],i[0]);return 0!==n?n:e[1]-i[1]})),i.map((e=>e[0]))}(U.filter((e=>(e.name.includes(V)||e.basis.includes(V)||0===V.length)&&(w.includes(e.type)||V.includes(e.status)||0===w.length))),function(e,t){return"desc"===e?(e,i)=>Q(e,i,t):(e,i)=>-Q(e,i,t)}(O,A)).slice(R*H,R*H+H)),[U,V,O,A,R,H,w]),Z=(e,t)=>s(t),$=(e,t)=>r(t),ee=async(e,t)=>{await K({variables:{id:t}}),await c()};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(d.c,{children:[(0,y.jsx)(C,{filterName:V,onRefresh:async()=>{await c(),i()},onFilterName:e=>{k(0),q(e.target.value)},onFilter:()=>b(!v)}),(0,y.jsx)(u.c,{sx:{overflow:"auto"},children:(0,y.jsx)(g.c,{children:(0,y.jsxs)(h.c,{sx:{minWidth:900},children:[(0,y.jsx)(I,{order:O,orderBy:A,officeId:t,onRequestSort:(e,t)=>{T(A===t&&"asc"===O?"desc":"asc"),L(t)},headLabel:[{id:"name",label:"Name",width:250},{id:"basis",label:"Basis"},{id:"type",label:"Type"},{id:"localDue",label:"Regional Deadline",align:"right"},{id:"nationalDue",label:"National Deadline",align:"right"},{id:"status",label:"Status",align:"right"},{id:"id",align:"right",width:20}]}),(0,y.jsxs)(m.c,{children:[Y.map((e=>(0,y.jsx)(W.c,{report:e,officeId:t,onView:Z,onEdit:$,onDelete:ee},e.id))),0===Y.length&&(0,y.jsx)(p.c,{sx:{height:80},children:(0,y.jsx)(x.c,{align:"center",colSpan:6,children:"No results found."})})]})]})})}),(0,y.jsx)(f.c,{page:R,component:"div",count:U.length,rowsPerPage:H,onPageChange:(e,t)=>{k(t)},rowsPerPageOptions:[10,25,50],onRowsPerPageChange:e=>{k(0),J(parseInt(e.target.value,10))}})]}),(0,y.jsx)(n.Suspense,{children:(0,y.jsx)(M,{open:v,selected:w,onFilter:e=>{const t=w.indexOf(e);let i=[];-1===t?i=i.concat(w,e):0===t?i=i.concat(w.slice(1)):t===w.length-1?i=i.concat(w.slice(0,-1)):t>0&&(i=i.concat(w.slice(0,t),w.slice(t+1))),S(i),k(0)},onClose:()=>b(!v),onClear:()=>S([]),filters:[{name:"Types",options:Array.from(new Set(U.map((e=>e.type)))).map((e=>({value:e,label:(0,E.SI)(e)})))},{name:"Status",options:Array.from(new Set(U.map((e=>e.status)))).map((e=>({value:e,label:(0,E.SI)(e)})))}]})}),(0,y.jsx)(n.Suspense,{children:(0,y.jsx)(F,{severity:"error",message:(null===a||void 0===a?void 0:a.message)||(null===j||void 0===j?void 0:j.message)||(null===X||void 0===X?void 0:X.message)})})]})}var T=i(4296),A=i(4194);const L=(0,n.lazy)((()=>i.e(336).then(i.bind(i,1336)))),V=(0,n.lazy)((()=>Promise.all([i.e(372),i.e(5)]).then(i.bind(i,8005))));function q(e,t){if(t)return e&&[T.QJ.Superuser,T.QJ.Director,T.QJ.HrAdmin].includes(e)?void 0:parseInt(t)}function B(e){switch(e){case T.oR.Hr:return"Human Resource Report";case T.oR.Admin:return"Administrative Report";default:return""}}function H(){const{office:e,role:t}=(0,A.Cq)((e=>e.auth)),{data:i,error:d,refetch:u}=(0,D.U)(N.uO,{variables:{officeId:q(t,e)}}),{data:h,error:x}=(0,P.Q)(z.G2);(0,n.useEffect)((()=>{h&&u()}),[h,u]);const[p,m]=n.useState(!1),[g,f]=n.useState(null),[j,v]=n.useState(null),b=()=>{m(!p),f(null)};return(0,y.jsxs)(c.c,{children:[(0,y.jsxs)(r.c,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,y.jsx)(a.c,{variant:"h4",children:"Reports"}),void 0===q(t,e)&&(0,y.jsx)(o.c,{onClick:b,variant:"contained",color:"inherit",startIcon:(0,y.jsx)(l.ov,{icon:"eva:plus-fill"}),children:"Create"})]}),(0,y.jsxs)(s.cp,{container:!0,spacing:2,children:[(0,y.jsx)(s.cp,{item:!0,xs:12,sm:6,md:3,children:(0,y.jsx)(l.aQ,{title:"Total Reports",total:i?i.getReportStatistics.total:0,color:"success",icon:(0,y.jsx)(l.ov,{icon:"line-md:document-report-twotone",sx:{width:64,height:64}})})}),(0,y.jsx)(s.cp,{item:!0,xs:12,sm:6,md:3,children:(0,y.jsx)(l.aQ,{title:"Submitted",total:i?i.getReportStatistics.submitted:0,color:"success",icon:(0,y.jsx)(l.ov,{icon:"ep:finished",sx:{width:64,height:64}})})}),(0,y.jsx)(s.cp,{item:!0,xs:12,sm:6,md:3,children:(0,y.jsx)(l.aQ,{title:"Pending",total:i?i.getReportStatistics.pending:0,color:"success",icon:(0,y.jsx)(l.ov,{icon:"fluent-mdl2:processing",sx:{width:64,height:64}})})}),(0,y.jsx)(s.cp,{item:!0,xs:12,sm:6,md:3,children:(0,y.jsx)(l.aQ,{title:"Overdue",total:i?i.getReportStatistics.overdue:0,color:"success",icon:(0,y.jsx)(l.ov,{icon:"ic:twotone-warning",sx:{width:64,height:64}})})}),(0,y.jsx)(s.cp,{item:!0,xs:12,children:(0,y.jsx)(O,{officeId:q(t,e),onRefresh:()=>u(),onView:e=>{v(e)},onEdit:e=>{f(e),m(!0)}})})]}),(0,y.jsx)(n.Suspense,{children:(0,y.jsx)(L,{reportId:g,open:p,onClose:b})}),j&&(0,y.jsx)(n.Suspense,{children:(0,y.jsx)(V,{open:null!==j,reportId:j,onClose:()=>v(null)})}),(0,y.jsx)(l.wR,{severity:"error",message:(null===d||void 0===d?void 0:d.message)||(null===x||void 0===x?void 0:x.message)})]})}},180:(e,t,i)=>{i.d(t,{A:()=>p,c:()=>m});var n=i(9060),s=i(8960),r=i(6931),o=i(7454),a=i(9344),c=i(700),l=i(6880),d=i(5548),u=i(4924),h=i(2496);const x=(0,n.lazy)((()=>i.e(960).then(i.bind(i,1960))));function p(e){switch(e){case"Ongoing":return"warning";case"Finished":return"success";case"Not Started":return"error";default:return"info"}}function m(e){let{officeId:t,report:i,onView:m,onEdit:g,onDelete:f}=e;const[j,v]=(0,n.useState)(null),[b,w]=(0,n.useState)(!1),[S,y]=(0,n.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(o.c,{hover:!0,tabIndex:-1,role:"checkbox",children:[void 0===t&&(0,h.jsx)(c.c,{children:(0,h.jsx)(d.c,{"aria-label":"expand row",size:"small",onClick:()=>y(!S),children:S?(0,h.jsx)(u.ov,{icon:"ic:baseline-expand-less"}):(0,h.jsx)(u.ov,{icon:"material-symbols:expand-more"})})}),(0,h.jsx)(c.c,{component:"th",scope:"row",children:(0,h.jsx)(s.c,{direction:"row",alignItems:"center",spacing:2,children:(0,h.jsx)(l.c,{variant:"subtitle2",children:i.name})})}),(0,h.jsx)(c.c,{sx:{minWidth:150},children:i.basis}),(0,h.jsx)(c.c,{children:i.type}),(0,h.jsx)(c.c,{align:"right",sx:{width:120},children:new Date(i.localDue).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,h.jsx)(c.c,{align:"right",sx:{width:120},children:new Date(i.nationalDue).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),void 0===t?(0,h.jsx)(c.c,{align:"right",sx:{width:50},children:(0,h.jsx)(u.iM,{color:i.pending>0?"warning":"success",children:i.pending>0?"".concat(i.pending," Pending"):"Complied"})}):(0,h.jsx)(c.c,{align:"right",sx:{width:50},children:(0,h.jsx)(u.iM,{color:p(i.status),children:i.status})}),(0,h.jsx)(c.c,{align:"right",sx:{width:30},children:(0,h.jsx)(d.c,{onClick:e=>{v(e.currentTarget)},children:(0,h.jsx)(u.ov,{icon:"eva:more-vertical-fill"})})})]}),void 0===t&&(0,h.jsx)(n.Suspense,{children:(0,h.jsx)(x,{collapse:S,reportId:i.id,onView:m})}),(0,h.jsxs)(r.cp,{open:!!j,anchorEl:j,onClose:()=>{v(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:200}},children:[t&&(0,h.jsxs)(a.c,{onClick:e=>{m(e,i.id),v(null)},children:[(0,h.jsx)(u.ov,{icon:"fluent-mdl2:review-solid",sx:{mr:2}}),"Submit"]}),void 0===t&&(0,h.jsxs)(a.c,{onClick:e=>{g(e,i.id),v(null)},children:[(0,h.jsx)(u.ov,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),void 0===t&&(0,h.jsxs)(a.c,{onClick:()=>w(!0),sx:{color:"error.main"},children:[(0,h.jsx)(u.ov,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),(0,h.jsx)(u._6,{open:b,onClose:()=>w(!1),onDelete:e=>{f(e,i.id),v(null),w(!1)}})]})}},1712:(e,t,i)=>{i.d(t,{c:()=>S});var n=i(5656),s=i(5072),r=i(9060),o=i(9736),a=i(5336),c=i(3448),l=i(1412),d=i(3596),u=i(7736),h=i(4276),x=i(2496);const p=["className","component","disableGutters","fixed","maxWidth","classes"],m=(0,h.c)(),g=(0,u.c)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t["maxWidth".concat((0,a.c)(String(i.maxWidth)))],i.fixed&&t.fixed,i.disableGutters&&t.disableGutters]}}),f=e=>(0,d.c)({props:e,name:"MuiContainer",defaultTheme:m});var j=i(5832),v=i(2556),b=i(3456);const w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=g,useThemeProps:i=f,componentName:d="MuiContainer"}=e,u=t((e=>{let{theme:t,ownerState:i}=e;return(0,s.c)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!i.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:i}=e;return i.fixed&&Object.keys(t.breakpoints.values).reduce(((e,i)=>{const n=i,s=t.breakpoints.values[n];return 0!==s&&(e[t.breakpoints.up(n)]={maxWidth:"".concat(s).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:i}=e;return(0,s.c)({},"xs"===i.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},i.maxWidth&&"xs"!==i.maxWidth&&{[t.breakpoints.up(i.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[i.maxWidth]).concat(t.breakpoints.unit)}})})),h=r.forwardRef((function(e,t){const r=i(e),{className:h,component:m="div",disableGutters:g=!1,fixed:f=!1,maxWidth:j="lg"}=r,v=(0,n.c)(r,p),b=(0,s.c)({},r,{component:m,disableGutters:g,fixed:f,maxWidth:j}),w=((e,t)=>{const{classes:i,fixed:n,disableGutters:s,maxWidth:r}=e,o={root:["root",r&&"maxWidth".concat((0,a.c)(String(r))),n&&"fixed",s&&"disableGutters"]};return(0,l.c)(o,(e=>(0,c.cp)(t,e)),i)})(b,d);return(0,x.jsx)(u,(0,s.c)({as:m,ownerState:b,className:(0,o.c)(w.root,h),ref:t},v))}));return h}({createStyledComponent:(0,v.cp)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t["maxWidth".concat((0,j.c)(String(i.maxWidth)))],i.fixed&&t.fixed,i.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,b.c)({props:e,name:"MuiContainer"})}),S=w}}]);
//# sourceMappingURL=152.c4e79f2c.chunk.js.map