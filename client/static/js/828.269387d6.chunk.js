"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[828],{447:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(9060),i=n(9448),a=n(272),l=n(3692),o=n(9072),c=n(7348),s=n(4380),u=n(6880),d=n(5548),f=n(3996),v=n(1552),h=n(9572),m=n(3288),g=n(4100),p=n(4194),x=n(2148),y=n(1424),b=n(9720),j=n(3540),C=n(9732),I=n(8964),w=n(4296),A=n(2496);function D(){const e=(0,m.c)(),t=(0,p.KX)(),[n,D]=(0,r.useState)(!1),[M,O]=(0,r.useState)({firstName:"",lastName:"",positionId:"",officeId:"",username:"",password:""}),[R,k]=(0,r.useState)(""),[N,S]=(0,r.useState)(null),[E,V]=(0,r.useState)(!1),[F,P]=(0,r.useState)([]),[W,Q]=(0,r.useState)(),{firstName:T,lastName:q,positionId:U,officeId:J,username:z,password:$}=M,{data:B,error:L}=(0,b.UL)(I.mq),{data:K,error:Z}=(0,b.UL)(I.It),[_,{error:G}]=(0,j.c)(I.uQ),[H,{error:X}]=(0,C.U)(I.GM),[Y,{error:ee}]=(0,C.U)(I.Mz);(0,r.useEffect)((()=>{if(M.officeId&&null!==B&&void 0!==B&&B.getPositions&&null!==K&&void 0!==K&&K.getOffices){const e=K.getOffices.find((e=>e.id===M.officeId));e&&P(function(e,t){return e.includes("Regional Director")?t.filter((e=>e.role===w.QJ.Director||e.role===w.QJ.Officer)):e.includes("Division")?t.filter((e=>e.role===w.QJ.Chief&&e.label.includes("Chief")||e.role===w.QJ.Officer)):e.includes("Revenue District Office")?t.filter((e=>e.role===w.QJ.Chief&&e.label.includes("District Officer")||e.role===w.QJ.Officer)):t.filter((e=>e.role===w.QJ.Officer))}(e.name,B.getPositions.map((e=>({id:e.id,label:e.label,role:e.role})))))}}),[M.officeId,K,B]);const te=e=>{O({...M,[e.target.name]:e.target.value})};return(0,A.jsxs)(i.c,{sx:{...(0,x.mo)({color:(0,g.W4)(e.palette.background.default,.5),imgUrl:"/assets/background/overlay_5.jpg"}),height:1},children:[(0,A.jsx)(y.Ml,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),(0,A.jsx)(o.c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:(0,A.jsxs)(l.c,{sx:{p:5,width:1,maxWidth:420},children:[(0,A.jsx)(u.c,{variant:"h4",children:E?"ACCOUNT VERIFICATION":"SIGN UP"}),E?(0,A.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Y({variables:{code:R,contact:z}}).then((e=>{let{data:n}=e;n&&n.confirmAccountVerify?t.push("/login"):Q("Invalid verification code.")})).catch((e=>{Q(e.message)}))},children:[(0,A.jsxs)(u.c,{variant:"body2",sx:{my:2},children:[`Verification code was sent to ${z}.`,(0,A.jsx)(c.c,{onClick:e=>{N&&H({variables:{uuid:N,contact:z}}).then((e=>{let{data:t}=e;t&&t.requestAccountVerify&&(V(!0),Q(void 0))})).catch((e=>{Q(e.message)}))},variant:"text",children:"Resend?"})]}),(0,A.jsx)(o.c,{spacing:2,sx:{mb:2},children:(0,A.jsx)(v.o,{length:6,value:R,onComplete:e=>{Y({variables:{code:e,contact:z}}).then((e=>{let{data:n}=e;n&&n.confirmAccountVerify?t.push("/login"):Q("Invalid verification code.")})).catch((e=>{Q(e.message)}))},onChange:e=>k(e)})}),(0,A.jsx)(o.c,{direction:"row",alignItems:"center",justifyContent:"center",sx:{my:2},children:(W||(null===X||void 0===X?void 0:X.message)||(null===ee||void 0===ee?void 0:ee.message))&&(0,A.jsx)(u.c,{variant:"body2",align:"center",color:"error",children:W||(null===X||void 0===X?void 0:X.message)||(null===ee||void 0===ee?void 0:ee.message)})}),(0,A.jsx)(c.c,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:"Verify Account"})]}):(0,A.jsxs)("form",{onSubmit:async e=>{e.preventDefault();let t=null,n=null;if(z.includes("@")){if(!/^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/.test(z))return void Q("Invalid email address.");t=z}else{const e=z.indexOf("9");if(e<0)return void Q("Invalid phone number.");const t=z.substring(e,z.length);if(10!==t.length||!/^\d+$/.test(z))return void Q("Invalid phone number.");n=t}if(!t&&!n)return void Q("Please provide valid email or phone number.");const r=await _({variables:{firstName:T.trim(),lastName:q.trim(),positionId:parseInt(U),officeId:parseInt(J),email:t,phone:n,password:$}});if(r.data&&r.data.createOfficer){const e=r.data.createOfficer.uuid;S(e),H({variables:{uuid:e,contact:z}}).then((e=>{let{data:t}=e;t&&t.requestAccountVerify&&(V(!0),Q(void 0))})).catch((e=>{Q(e.message)}))}else Q("Account already exists.")},children:[(0,A.jsxs)(u.c,{variant:"body2",sx:{my:2},children:["Already have an account?",(0,A.jsx)(a.c,{href:"/login",variant:"subtitle2",sx:{ml:.5,cursor:"pointer"},children:"Sign in"})]}),(0,A.jsxs)(o.c,{spacing:2,sx:{mb:2},children:[(0,A.jsx)(s.c,{name:"firstName",label:"First Name",value:T,onChange:te,required:!0,fullWidth:!0}),(0,A.jsx)(s.c,{name:"lastName",label:"Last Name",value:q,onChange:te,required:!0,fullWidth:!0}),K&&(0,A.jsx)(s.c,{name:"officeId",select:!0,label:"Office",value:J,onChange:te,required:!0,fullWidth:!0,children:K.getOffices.map((e=>(0,A.jsx)(f.c,{value:e.id,children:e.name},e.id)))}),B&&(0,A.jsx)(s.c,{name:"positionId",select:!0,label:"Position",value:U,onChange:te,required:!0,fullWidth:!0,children:F.map((e=>(0,A.jsx)(f.c,{value:e.id,children:e.label},e.id)))}),(0,A.jsx)(s.c,{name:"username",label:"Email or Phone Number (+63)",value:z,onChange:te,fullWidth:!0}),(0,A.jsx)(s.c,{name:"password",label:"Password",type:n?"text":"password",value:$,onChange:te,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,A.jsx)(h.c,{position:"end",children:(0,A.jsx)(d.c,{onClick:()=>D(!n),edge:"end",children:(0,A.jsx)(y.ov,{icon:n?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),(0,A.jsx)(o.c,{direction:"row",alignItems:"center",justifyContent:"center",sx:{my:2},children:(W||(null===L||void 0===L?void 0:L.message)||(null===Z||void 0===Z?void 0:Z.message)||(null===G||void 0===G?void 0:G.message))&&(0,A.jsx)(u.c,{variant:"body2",align:"center",color:"error",children:W||(null===L||void 0===L?void 0:L.message)||(null===Z||void 0===Z?void 0:Z.message)||(null===G||void 0===G?void 0:G.message)})}),(0,A.jsx)(c.c,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:"Sign up"})]})]})})]})}},1552:(e,t,n)=>{n.d(t,{o:()=>y});var r=n(2496),i=n(9060),a=n(2556),l=n(4380),o=n(9448);const c={TextFieldStyled:(0,a.cp)(l.c)`
  input {
    text-align: center;
  }
`},s=e=>(0,r.jsx)(c.TextFieldStyled,{...e}),u="ArrowLeft",d="ArrowRight",f="Backspace",v="Home",h="End";function m(e){return e.join("")}function g(e,t){return[...e,t]}function p(e){const t=i.useRef((()=>{throw new Error("Cannot call an event handler while rendering.")}));return i.useInsertionEffect((()=>{t.current=e})),i.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current?.(...n)}),[])}const x=()=>!0,y=i.forwardRef(((e,t)=>{const{value:n="",length:a=4,autoFocus:l=!1,onChange:c,TextFieldsProps:y,onComplete:b,validateChar:j=x,className:C,onBlur:I,...w}=e,A=i.useRef(n),D=p(b),M=p((e=>{const t=e.slice(0,a);return{isCompleted:t.length===a,finalValue:t}}));i.useEffect((()=>{const{isCompleted:e,finalValue:t}=M(A.current);e&&D(t)}),[a,D,M]);const O=function(e,t){return e<=0?[]:Array.from({length:e},t)}(a,((e,t)=>({character:n[t]||"",inputRef:i.createRef()}))),R=e=>O.findIndex((t=>{let{inputRef:n}=t;return n.current===e})),k=()=>O.map((e=>{let{character:t}=e;return t})),N=(e,t)=>{const n=function(e,t,n){return e.map(((e,r)=>t===r?n:e))}(k(),e,t);return m(n)},S=e=>{O[e]?.inputRef.current?.select()},E=e=>{e+1!==a&&(O[e+1].character?S(e+1):(e=>{O[e]?.inputRef.current?.focus()})(e+1))},V=(e,t)=>"function"!=typeof j||j(e,t),F=e=>{const t=R(e.target);if(0===t&&e.target.value.length>1){const{finalValue:t,isCompleted:n}=M(e.target.value);return c?.(t),n&&b?.(t),void S(t.length-1)}const n=e.target.value[0]||"";let r=n;r&&!V(r,t)&&(r="");const i=N(t,r);c?.(i);const{isCompleted:a,finalValue:l}=M(i);a&&b?.(l),""!==r?i.length-1<t?S(i.length):E(t):""===n&&i.length<=t&&S(t-1)},P=e=>{const t=e.clipboardData.getData("text/plain"),n=e.target,r=O.findIndex((e=>{let{character:t,inputRef:r}=e;return""===t||r.current===n})),i=function(e,t,n){return e.reduce(((e,t,r)=>{const{characters:i,restArrayMerged:a}=e;if(r<n)return{restArrayMerged:a,characters:g(i,t)};const[l,...o]=a;return{restArrayMerged:o,characters:g(i,l||"")}}),{restArrayMerged:t,characters:[]}).characters}(k(),function(e){return e.split("")}(t),r).map(((e,t)=>V(e,t)?e:"")),l=m(i);c?.(l);const{isCompleted:o,finalValue:s}=M(l);o?(b?.(s),S(a-1)):S(l.length)};return(0,r.jsx)(o.c,{display:"flex",gap:"20px",alignItems:"center",ref:t,className:`MuiOtpInput-Box ${C||""}`,...w,children:O.map(((e,t)=>{let{character:i,inputRef:a}=e;const{onPaste:o,onFocus:m,onKeyDown:g,className:p,onBlur:x,...b}="function"==typeof y?y(t)||{}:y||{};return(0,r.jsx)(s,{autoFocus:!!l&&0===t,autoComplete:"one-time-code",value:i,inputRef:a,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${t+1} ${p||""}`,onPaste:e=>{e.preventDefault(),P(e),o?.(e)},onFocus:e=>{e.preventDefault(),e.target.select(),m?.(e)},onChange:F,onKeyDown:e=>{(e=>{const t=e.target,n=t.selectionStart,r=t.selectionEnd,i=R(t),a=0===n&&0===r;if(t.value===e.key)e.preventDefault(),E(i);else if(f===e.key)if(t.value){if(a){e.preventDefault();const t=N(i,"");c?.(t),t.length<=i&&S(i-1)}}else e.preventDefault(),S(i-1);else u===e.key?(e.preventDefault(),S(i-1)):d===e.key?(e.preventDefault(),S(i+1)):v===e.key?(e.preventDefault(),S(0)):h===e.key&&(e.preventDefault(),S(O.length-1))})(e),g?.(e)},onBlur:e=>{x?.(e),(e=>{if(!O.some((t=>{let{inputRef:n}=t;return n.current===e.relatedTarget}))){const{isCompleted:e,finalValue:t}=M(n);I?.(t,e)}})(e)},...b},t)}))})}))},3540:(e,t,n)=>{n.d(t,{c:()=>d});var r=n(7328),i=n(9528),a=n(6172),l=n(3520),o=n(9179),c=n(4056),s=n(1579),u=n(4268);function d(e,t){var n=(0,s.y)(null===t||void 0===t?void 0:t.client);(0,o.Y5)(e,o.UT.Mutation);var d=i.useState({called:!1,loading:!1,client:n}),f=d[0],v=d[1],h=i.useRef({result:f,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});(0,u.M)((function(){Object.assign(h.current,{client:n,options:t,mutation:e})}));var m=i.useCallback((function(e){void 0===e&&(e={});var t=h.current,n=t.options,i=t.mutation,o=(0,r.C3)((0,r.C3)({},n),{mutation:i}),s=e.client||h.current.client;h.current.result.loading||o.ignoreResults||!h.current.isMounted||v(h.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:s});var u=++h.current.mutationId,d=(0,a.I)(o,e);return s.mutate(d).then((function(t){var n,r,i=t.data,a=t.errors,o=a&&a.length>0?new c._M({graphQLErrors:a}):void 0,f=e.onError||(null===(n=h.current.options)||void 0===n?void 0:n.onError);if(o&&f&&f(o,d),u===h.current.mutationId&&!d.ignoreResults){var m={called:!0,loading:!1,data:i,error:o,client:s};h.current.isMounted&&!(0,l.y)(h.current.result,m)&&v(h.current.result=m)}var g=e.onCompleted||(null===(r=h.current.options)||void 0===r?void 0:r.onCompleted);return o||null===g||void 0===g||g(t.data,d),t})).catch((function(t){var n;if(u===h.current.mutationId&&h.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:s};(0,l.y)(h.current.result,r)||v(h.current.result=r)}var i=e.onError||(null===(n=h.current.options)||void 0===n?void 0:n.onError);if(i)return i(t,d),{data:void 0,errors:t};throw t}))}),[]),g=i.useCallback((function(){if(h.current.isMounted){var e={called:!1,loading:!1,client:h.current.client};Object.assign(h.current,{mutationId:0,result:e}),v(e)}}),[]);return i.useEffect((function(){var e=h.current;return e.isMounted=!0,function(){e.isMounted=!1}}),[]),[m,(0,r.C3)({reset:g},f)]}}}]);
//# sourceMappingURL=828.269387d6.chunk.js.map