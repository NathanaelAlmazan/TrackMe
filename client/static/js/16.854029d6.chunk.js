"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[16],{5016:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var i=n(2656),r=n(6773),o=n(4488),s=n(3856),c=n(9504),a=n(700),l=n(9904),d=n(7454),p=n(6880),u=n(3692),h=n(1096),x=n(4436),m=n(5656),j=n(5072),f=n(9060),v=n(9736),g=n(7067),b=n(2556),y=n(2128),S=n(3544),w=n(816);function R(e){return(0,w.cp)("MuiCardActions",e)}(0,S.c)("MuiCardActions",["root","spacing"]);var C=n(2496);const I=["disableSpacing","className"],D=(0,b.cp)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,j.c)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),B=f.forwardRef((function(e,t){const n=(0,y.C)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:r}=n,o=(0,m.c)(n,I),s=(0,j.c)({},n,{disableSpacing:i}),c=(e=>{const{classes:t,disableSpacing:n}=e,i={root:["root",!n&&"spacing"]};return(0,g.c)(i,R,t)})(s);return(0,C.jsx)(D,(0,j.c)({className:(0,v.c)(c.root,r),ownerState:s,ref:t},o))}));var k=n(9448),W=n(9072),N=n(7348),A=n(5548),M=n(3358),E=n(1424);function F(e){const t=e.split("_");return t[t.length-1]}function L(e){let{message:t,files:n,onEdit:i,onClose:r}=e;return(0,C.jsxs)(W.c,{spacing:2,children:[(0,C.jsxs)(u.c,{children:[(0,C.jsx)(h.c,{action:(0,C.jsx)(M.c,{title:"Edit Report",children:(0,C.jsx)(A.c,{"aria-label":"settings",onClick:i,children:(0,C.jsx)(E.ov,{icon:"akar-icons:edit"})})})}),(0,C.jsx)(x.c,{children:(0,C.jsx)(p.c,{variant:"body1",children:t})}),n&&n.length>0&&(0,C.jsx)(B,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsx)(k.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:n.map((e=>(0,C.jsx)(p.c,{component:"a",variant:"body2",href:e.trim(),target:"_blank",sx:{mx:"5px"},children:F(e)},e)))})})]}),(0,C.jsx)(W.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:(0,C.jsx)(N.c,{color:"inherit",onClick:r,children:"Close"})})]})}var T=n(4380),P=n(9572),U=n(7532),_=n(9780),q=n(3540),z=n(7976);function G(e){let{content:t,reportId:n,onReport:i,onCancel:r}=e;const[o,s]=(0,f.useState)(t||""),[c,a]=(0,f.useState)([]),[l,d]=(0,f.useState)(),[p,{error:u}]=(0,q.c)(z.aA);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(k.c,{component:"form",onSubmit:async e=>{e.preventDefault();let t=[];if(c.length>0)try{const e=new FormData;c.forEach((t=>{e.append("files",t)}));t=(await _.c.post("https://rr6manila.com/api/upload",e)).data.files}catch(l){return void d("Failed to upload files.")}await p({variables:{id:n,message:o,files:t.map((e=>e.fileUrl))}}),i(),s(""),a([]),r()},children:(0,C.jsxs)(W.c,{spacing:2,children:[(0,C.jsx)(k.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:c.map((e=>(0,C.jsx)(U.c,{label:e.name,variant:"outlined",onDelete:()=>{return t=e.name,void a((e=>e.filter((e=>e.name!==t))));var t},sx:{mx:"5px"}},e.name)))}),(0,C.jsx)(T.c,{variant:"outlined",placeholder:"Report...",value:o,onChange:e=>s(e.target.value),multiline:!0,rows:3,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,C.jsx)(P.c,{position:"end",children:(0,C.jsx)(M.c,{title:"Insert File",children:(0,C.jsxs)(A.c,{component:"label",children:[(0,C.jsx)(E.ov,{icon:"material-symbols:attach-file-add-rounded"}),(0,C.jsx)("input",{type:"file",multiple:!0,hidden:!0,onChange:e=>{const t=e.target.files;t&&a((e=>e.concat(function(e){const t=[];for(let n=0;n<e.length;n++){const i=e.item(n);i&&t.push(i)}return t}(t))))}})]})})})}}),(0,C.jsxs)(W.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:[(0,C.jsx)(N.c,{color:"inherit",onClick:r,children:"Cancel"}),(0,C.jsx)(N.c,{type:"submit",variant:"contained",color:"inherit",children:"Submit"})]})]})}),(0,C.jsx)(E.wR,{severity:"error",message:(null===u||void 0===u?void 0:u.message)||l})]})}var O=n(9720),Q=n(3152);function H(e){let{reportId:t,open:n,onClose:u}=e;const[h,x]=(0,f.useState)(!0),{data:m,error:j,refetch:v}=(0,O.UL)(z.uQ,{fetchPolicy:"no-cache",variables:{id:t}});return(0,f.useEffect)((()=>{m&&!m.getSubmittedReportById.message?x(!0):x(!1)}),[m]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(i.c,{open:n,onClose:u,maxWidth:"sm",fullWidth:!0,children:[(0,C.jsxs)(r.c,{component:"div",children:[(0,C.jsx)(p.c,{variant:"h4",children:null===m||void 0===m?void 0:m.getSubmittedReportById.report.name}),(0,C.jsx)(p.c,{variant:"body1",children:(0,Q.parseType)(null===m||void 0===m?void 0:m.getSubmittedReportById.report.type)})]}),(0,C.jsxs)(o.c,{children:[(0,C.jsx)(l.c,{children:(0,C.jsx)(s.c,{size:"small","aria-label":"dense table",sx:{mb:2},children:(0,C.jsxs)(c.c,{children:[(0,C.jsxs)(d.c,{children:[(0,C.jsx)(a.c,{component:"th",scope:"row",children:(0,C.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Report Basis"})}),(0,C.jsx)(a.c,{children:(0,C.jsx)(p.c,{variant:"body2",children:null===m||void 0===m?void 0:m.getSubmittedReportById.report.basis})})]}),(0,C.jsxs)(d.c,{children:[(0,C.jsx)(a.c,{component:"th",scope:"row",children:(0,C.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Report Office"})}),(0,C.jsx)(a.c,{children:(0,C.jsx)(p.c,{variant:"body2",children:null===m||void 0===m?void 0:m.getSubmittedReportById.office.name})})]}),(0,C.jsxs)(d.c,{children:[(0,C.jsx)(a.c,{component:"th",scope:"row",children:(0,C.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Regional Deadline"})}),(0,C.jsx)(a.c,{children:(0,C.jsx)(p.c,{variant:"body2",children:m&&new Date(m.getSubmittedReportById.localDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]}),(0,C.jsxs)(d.c,{children:[(0,C.jsx)(a.c,{component:"th",scope:"row",children:(0,C.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"National Deadline"})}),(0,C.jsx)(a.c,{children:(0,C.jsx)(p.c,{variant:"body2",children:m&&new Date(m.getSubmittedReportById.nationalDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]})]})})}),m&&h?(0,C.jsx)(G,{content:m.getSubmittedReportById.message,reportId:parseInt(m.getSubmittedReportById.id),onReport:()=>v(),onCancel:()=>u()}):(0,C.jsx)(L,{message:null===m||void 0===m?void 0:m.getSubmittedReportById.message,files:null===m||void 0===m?void 0:m.getSubmittedReportById.files,onEdit:()=>x(!h),onClose:()=>u()})]})]}),(0,C.jsx)(E.wR,{severity:"error",message:null===j||void 0===j?void 0:j.message})]})}},6773:(e,t,n)=>{n.d(t,{c:()=>j});var i=n(5072),r=n(5656),o=n(9060),s=n(9736),c=n(7067),a=n(6880),l=n(2556),d=n(2128),p=n(2172),u=n(6432),h=n(2496);const x=["className","id"],m=(0,l.cp)(a.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),j=o.forwardRef((function(e,t){const n=(0,d.C)({props:e,name:"MuiDialogTitle"}),{className:a,id:l}=n,j=(0,r.c)(n,x),f=n,v=(e=>{const{classes:t}=e;return(0,c.c)({root:["root"]},p.G,t)})(f),{titleId:g=l}=o.useContext(u.c);return(0,h.jsx)(m,(0,i.c)({component:"h2",className:(0,s.c)(v.root,a),ownerState:f,ref:t,variant:"h6",id:null!=l?l:g},j))}))}}]);
//# sourceMappingURL=16.854029d6.chunk.js.map