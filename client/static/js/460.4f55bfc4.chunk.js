"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[460],{5460:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var r=i(9060),n=i(2656),o=i(6773),a=i(4488),l=i(7667),c=i(9e3),s=i(8960),d=i(4380),u=i(3996),f=i(5084),v=i(4480),m=i(9732),g=i(3540),h=i(8964),p=i(4296),I=i(2496);const x={firstName:"",lastName:"",positionId:"",officeId:""};function C(e){var t,i;let{open:C,onClose:O,officerId:b}=e;const[N,j]=(0,r.useState)(),[y,M]=(0,r.useState)(x),[w,E]=(0,r.useState)([]),{firstName:Q,lastName:R,positionId:S,officeId:D}=y,{data:k,error:B}=(0,v.U)(h.mq),{data:J,error:W}=(0,v.U)(h.It),[q,{data:P,error:U}]=(0,m.U)(h.mG,{fetchPolicy:"no-cache"}),[F,{error:T}]=(0,g.c)(h.uQ),[G,{error:L}]=(0,g.c)(h.Kg),A=e=>{M({...y,[e.target.name]:e.target.value})};(0,r.useEffect)((()=>{if(y.officeId&&null!==k&&void 0!==k&&k.getPositions&&null!==J&&void 0!==J&&J.getOffices){const e=J.getOffices.find((e=>e.id===y.officeId));e&&E(function(e,t){return e.includes("Regional Director")?t.filter((e=>e.role===p.QJ.Director||e.role===p.QJ.Officer)):e.includes("Division")?t.filter((e=>e.role===p.QJ.Chief&&e.label.includes("Chief")||e.role===p.QJ.Officer)):e.includes("Revenue District Office")?t.filter((e=>e.role===p.QJ.Chief&&e.label.includes("District Officer")||e.role===p.QJ.Officer)):t.filter((e=>e.role===p.QJ.Officer))}(e.name,k.getPositions.map((e=>({id:e.id,label:e.label,role:e.role})))))}}),[y.officeId,J,k]),(0,r.useEffect)((()=>{b&&q({variables:{uuid:b}}).then((e=>{let{data:t}=e;var i,r;t&&t.getOfficerById&&M({firstName:t.getOfficerById.firstName,lastName:t.getOfficerById.lastName,positionId:(null===(i=t.getOfficerById.position)||void 0===i?void 0:i.id.toString())||"",officeId:(null===(r=t.getOfficerById.office)||void 0===r?void 0:r.id.toString())||""})}))}),[b,q]);const K=()=>{M(x),O()};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(n.c,{open:C,onClose:K,maxWidth:"sm",fullWidth:!0,children:[(0,I.jsx)(o.c,{children:P?"Edit ".concat((null===(t=P.getOfficerById)||void 0===t?void 0:t.firstName)+" "+(null===(i=P.getOfficerById)||void 0===i?void 0:i.lastName)," Profile"):"Create Officer"}),(0,I.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b){const e=await G({variables:{uuid:b,firstName:Q.trim(),lastName:R.trim(),positionId:parseInt(S),officeId:parseInt(D)}});e.data&&e.data.updateOfficer?O():j("Failed to update account.")}else{const e=await F({variables:{firstName:Q.trim(),lastName:R.trim(),positionId:parseInt(S),officeId:parseInt(D)}});e.data&&e.data.createOfficer?O():j("Account already exists.")}M(x)},children:[(0,I.jsx)(a.c,{children:(0,I.jsxs)(s.c,{spacing:2,sx:{mb:3},children:[(0,I.jsx)(d.c,{name:"firstName",label:"First Name",value:Q,onChange:A,required:!0,fullWidth:!0}),(0,I.jsx)(d.c,{name:"lastName",label:"Last Name",value:R,onChange:A,required:!0,fullWidth:!0}),J&&(0,I.jsx)(d.c,{name:"officeId",select:!0,label:"Office",value:D,onChange:A,required:!0,fullWidth:!0,children:J.getOffices.map((e=>(0,I.jsx)(u.c,{value:e.id,children:e.name},e.id)))}),k&&(0,I.jsx)(d.c,{name:"positionId",select:!0,label:"Position",value:S,onChange:A,required:!0,fullWidth:!0,children:w.map((e=>(0,I.jsx)(u.c,{value:e.id,children:e.label},e.id)))})]})}),(0,I.jsxs)(l.c,{children:[(0,I.jsx)(c.c,{onClick:K,color:"inherit",children:"Cancel"}),(0,I.jsx)(c.c,{type:"submit",variant:"contained",color:"inherit",children:"Save"})]})]})]}),(0,I.jsx)(f.wR,{severity:"error",message:(null===B||void 0===B?void 0:B.message)||(null===W||void 0===W?void 0:W.message)||(null===U||void 0===U?void 0:U.message)||(null===T||void 0===T?void 0:T.message)||N||(null===L||void 0===L?void 0:L.message)})]})}},6773:(e,t,i)=>{i.d(t,{c:()=>h});var r=i(5072),n=i(5656),o=i(9060),a=i(9736),l=i(1412),c=i(6880),s=i(2556),d=i(3456),u=i(2172),f=i(6432),v=i(2496);const m=["className","id"],g=(0,s.cp)(c.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),h=o.forwardRef((function(e,t){const i=(0,d.c)({props:e,name:"MuiDialogTitle"}),{className:c,id:s}=i,h=(0,n.c)(i,m),p=i,I=(e=>{const{classes:t}=e;return(0,l.c)({root:["root"]},u.G,t)})(p),{titleId:x=s}=o.useContext(f.c);return(0,v.jsx)(g,(0,r.c)({component:"h2",className:(0,a.c)(I.root,c),ownerState:p,ref:t,variant:"h6",id:null!=s?s:x},h))}))},3540:(e,t,i)=>{i.d(t,{c:()=>d});var r=i(7328),n=i(9528),o=i(2200),a=i(3520),l=i(9179),c=i(4056),s=i(3960);function d(e,t){var i=(0,s.y)(null===t||void 0===t?void 0:t.client);(0,l.Y5)(e,l.UT.Mutation);var d=n.useState({called:!1,loading:!1,client:i}),u=d[0],f=d[1],v=n.useRef({result:u,mutationId:0,isMounted:!0,client:i,mutation:e,options:t});Object.assign(v.current,{client:i,options:t,mutation:e});var m=n.useCallback((function(e){void 0===e&&(e={});var t=v.current,i=t.options,n=t.mutation,l=(0,r.C3)((0,r.C3)({},i),{mutation:n}),s=e.client||v.current.client;v.current.result.loading||l.ignoreResults||!v.current.isMounted||f(v.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:s});var d=++v.current.mutationId,u=(0,o.I)(l,e);return s.mutate(u).then((function(t){var i,r,n=t.data,o=t.errors,l=o&&o.length>0?new c._M({graphQLErrors:o}):void 0,m=e.onError||(null===(i=v.current.options)||void 0===i?void 0:i.onError);if(l&&m&&m(l,u),d===v.current.mutationId&&!u.ignoreResults){var g={called:!0,loading:!1,data:n,error:l,client:s};v.current.isMounted&&!(0,a.y)(v.current.result,g)&&f(v.current.result=g)}var h=e.onCompleted||(null===(r=v.current.options)||void 0===r?void 0:r.onCompleted);return l||null===h||void 0===h||h(t.data,u),t})).catch((function(t){var i;if(d===v.current.mutationId&&v.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:s};(0,a.y)(v.current.result,r)||f(v.current.result=r)}var n=e.onError||(null===(i=v.current.options)||void 0===i?void 0:i.onError);if(n)return n(t,u),{data:void 0,errors:t};throw t}))}),[]),g=n.useCallback((function(){if(v.current.isMounted){var e={called:!1,loading:!1,client:i};Object.assign(v.current,{mutationId:0,result:e}),f(e)}}),[]);return n.useEffect((function(){return v.current.isMounted=!0,function(){v.current.isMounted=!1}}),[]),[m,(0,r.C3)({reset:g},u)]}}}]);
//# sourceMappingURL=460.4f55bfc4.chunk.js.map