"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[160],{8160:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var i=r(9060),n=r(7256),a=r(272),s=r(3692),c=r(8960),l=r(9e3),o=r(8320),u=r(6880),d=r(5548),f=r(3288),h=r(9872),v=r(9572),p=r(672),m=r(4194),g=r(2148),x=r(2044),b=r(9732),j=r(8964),y=r(4296),N=r(2496);const C={firstName:"",lastName:"",password:""};function O(){const e=(0,f.c)(),t=(0,m.KX)(),r=(0,m.Ab)(),[O,w]=(0,i.useState)(),[k,S]=(0,i.useState)(!1),[P,W]=(0,i.useState)(C),{firstName:q,lastName:I,password:Q}=P,[M,{error:D}]=(0,b.U)(j.qy),R=e=>{W({...P,[e.target.name]:e.target.value})};return(0,N.jsxs)(n.c,{sx:{...(0,g.mo)({color:(0,h.W4)(e.palette.background.default,.5),imgUrl:"/assets/background/overlay_5.jpg"}),height:1},children:[(0,N.jsx)(x.Ml,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),(0,N.jsx)(c.c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:(0,N.jsxs)(s.c,{sx:{p:5,width:1,maxWidth:420},children:[(0,N.jsx)(u.c,{variant:"h4",children:"SIGN IN"}),(0,N.jsxs)(u.c,{variant:"body2",sx:{mt:2,mb:5},children:["Don't have an account?",(0,N.jsx)(a.c,{href:"/register",variant:"subtitle2",sx:{ml:.5,cursor:"pointer"},children:"Sign up"})]}),(0,N.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const i=await M({variables:{firstName:q,lastName:I,password:Q}});if(i.data&&i.data.loginOfficer){var n,a,s,c;r((0,p.Mp)({uuid:i.data.loginOfficer.uuid,firstName:i.data.loginOfficer.firstName,lastName:i.data.loginOfficer.lastName,role:null===(n=i.data.loginOfficer.position)||void 0===n?void 0:n.role,office:null===(a=i.data.loginOfficer.office)||void 0===a?void 0:a.id,position:null===(s=i.data.loginOfficer.position)||void 0===s?void 0:s.label}));const e=(null===(c=i.data.loginOfficer.position)||void 0===c?void 0:c.role)||y.QJ.Officer;[y.QJ.Superuser,y.QJ.Director].includes(e)?t.push("/dashboard"):t.push("/documents")}else w("Wrong credentials or account is inactive.");W(C)},children:[(0,N.jsxs)(c.c,{spacing:2,sx:{mb:3},children:[(0,N.jsx)(o.c,{name:"firstName",label:"First Name",value:q,onChange:R,required:!0,fullWidth:!0}),(0,N.jsx)(o.c,{name:"lastName",label:"Last Name",value:I,onChange:R,required:!0,fullWidth:!0}),(0,N.jsx)(o.c,{name:"password",label:"Password",type:k?"text":"password",value:Q,onChange:R,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,N.jsx)(v.c,{position:"end",children:(0,N.jsx)(d.c,{onClick:()=>S(!k),edge:"end",children:(0,N.jsx)(x.ov,{icon:k?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),(0,N.jsx)(l.c,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:"Sign in"})]})]})}),(0,N.jsx)(x.wR,{severity:"error",message:O||(null===D||void 0===D?void 0:D.message)})]})}},9732:(e,t,r)=>{r.d(t,{U:()=>o});var i=r(7328),n=r(9528),a=r(2200),s=r(4480),c=r(3960),l=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function o(e,t){var r,o=n.useRef(),u=n.useRef(),d=n.useRef(),f=(0,a.I)(t,o.current||{}),h=null!==(r=null===f||void 0===f?void 0:f.query)&&void 0!==r?r:e;u.current=t,d.current=h;var v=(0,s.a)((0,c.y)(t&&t.client),h),p=v.useQuery((0,i.C3)((0,i.C3)({},f),{skip:!o.current})),m=p.observable.options.initialFetchPolicy||v.getDefaultFetchPolicy(),g=Object.assign(p,{called:!!o.current}),x=n.useMemo((function(){for(var e={},t=function(t){var r=g[t];e[t]=function(){return o.current||(o.current=Object.create(null),v.forceUpdateState()),r.apply(this,arguments)}},r=0,i=l;r<i.length;r++){t(i[r])}return e}),[]);Object.assign(g,x);var b=n.useCallback((function(e){o.current=e?(0,i.C3)((0,i.C3)({},e),{fetchPolicy:e.fetchPolicy||m}):{fetchPolicy:m};var t=(0,a.I)(u.current,(0,i.C3)({query:d.current},o.current)),r=v.executeQuery((0,i.C3)((0,i.C3)({},t),{skip:!1})).then((function(e){return Object.assign(e,x)}));return r.catch((function(){})),r}),[]);return[b,g]}}}]);
//# sourceMappingURL=160.83d8ef94.chunk.js.map