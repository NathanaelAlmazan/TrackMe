"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5],{8005:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var i=n(2656),r=n(6773),o=n(4488),s=n(3856),c=n(9504),l=n(700),a=n(9904),d=n(7454),h=n(6880),x=n(3692),u=n(4436),m=n(5364),p=n(7256),j=n(8960),f=n(9e3),v=n(2496);function g(e){const t=e.split("_");return t[t.length-1]}function y(e){let{message:t,files:n,onClose:i}=e;return(0,v.jsxs)(j.c,{spacing:2,children:[(0,v.jsxs)(x.c,{children:[(0,v.jsx)(u.c,{children:(0,v.jsx)(h.c,{variant:"body1",children:t})}),n&&n.length>0&&(0,v.jsx)(m.c,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,v.jsx)(p.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:n.map((e=>(0,v.jsx)(h.c,{component:"a",variant:"body2",href:e.trim(),target:"_blank",sx:{mx:"5px"},children:g(e)},e)))})})]}),(0,v.jsx)(j.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:(0,v.jsx)(f.c,{color:"inherit",onClick:i,children:"Close"})})]})}var b=n(9060),w=n(8320),R=n(5548),I=n(3358),C=n(9572),S=n(7532),D=n(2044),B=n(8372),k=n(3540),W=n(7976);function F(e){let{reportId:t,onReport:n,onCancel:i}=e;const[r,o]=(0,b.useState)(""),[s,c]=(0,b.useState)([]),[l,a]=(0,b.useState)(),[d,{error:h}]=(0,k.c)(W.aA);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.c,{component:"form",onSubmit:async e=>{e.preventDefault();let l=[];if(s.length>0)try{const e=new FormData;s.forEach((t=>{e.append("files",t)}));l=(await B.c.post("https://rr6manila.com/api/upload",e)).data.files}catch(h){return void a("Failed to upload files.")}await d({variables:{id:t,message:r,files:l.map((e=>e.fileUrl))}}),n(),o(""),c([]),i()},children:(0,v.jsxs)(j.c,{spacing:2,children:[(0,v.jsx)(p.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:s.map((e=>(0,v.jsx)(S.c,{label:e.name,variant:"outlined",onDelete:()=>{return t=e.name,void c((e=>e.filter((e=>e.name!==t))));var t},sx:{mx:"5px"}},e.name)))}),(0,v.jsx)(w.c,{variant:"outlined",placeholder:"Report...",value:r,onChange:e=>o(e.target.value),multiline:!0,rows:3,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,v.jsx)(C.c,{position:"end",children:(0,v.jsx)(I.c,{title:"Insert File",children:(0,v.jsxs)(R.c,{component:"label",children:[(0,v.jsx)(D.ov,{icon:"material-symbols:attach-file-add-rounded"}),(0,v.jsx)("input",{type:"file",multiple:!0,hidden:!0,style:{display:"none"},onChange:e=>{const t=e.target.files;t&&c((e=>e.concat(function(e){const t=[];for(let n=0;n<e.length;n++){const i=e.item(n);i&&t.push(i)}return t}(t))))}})]})})})}}),(0,v.jsxs)(j.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:[(0,v.jsx)(f.c,{color:"inherit",onClick:i,children:"Cancel"}),(0,v.jsx)(f.c,{type:"submit",variant:"contained",color:"inherit",children:"Submit"})]})]})}),(0,v.jsx)(D.wR,{severity:"error",message:(null===h||void 0===h?void 0:h.message)||l})]})}var N=n(4480);function A(e){let{reportId:t,open:n,onClose:x}=e;const{data:u,error:m,refetch:p}=(0,N.U)(W.uQ,{fetchPolicy:"no-cache",variables:{id:t}});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.c,{open:n,onClose:x,maxWidth:"sm",fullWidth:!0,children:[(0,v.jsxs)(r.c,{component:"div",children:[(0,v.jsx)(h.c,{variant:"h4",children:null===u||void 0===u?void 0:u.getSubmittedReportById.report.name}),(0,v.jsx)(h.c,{variant:"body1",children:null===u||void 0===u?void 0:u.getSubmittedReportById.report.basis})]}),(0,v.jsxs)(o.c,{children:[(0,v.jsx)(a.c,{children:(0,v.jsx)(s.c,{size:"small","aria-label":"dense table",sx:{maxWidth:400,mb:2},children:(0,v.jsxs)(c.c,{children:[(0,v.jsxs)(d.c,{children:[(0,v.jsx)(l.c,{component:"th",scope:"row",children:(0,v.jsx)(h.c,{variant:"subtitle2",children:"Report Office"})}),(0,v.jsx)(l.c,{children:(0,v.jsx)(h.c,{variant:"body2",children:null===u||void 0===u?void 0:u.getSubmittedReportById.office.name})})]}),(0,v.jsxs)(d.c,{children:[(0,v.jsx)(l.c,{component:"th",scope:"row",children:(0,v.jsx)(h.c,{variant:"subtitle2",children:"Regional Deadline"})}),(0,v.jsx)(l.c,{children:(0,v.jsx)(h.c,{variant:"body2",children:u&&new Date(u.getSubmittedReportById.localDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]}),(0,v.jsxs)(d.c,{children:[(0,v.jsx)(l.c,{component:"th",scope:"row",children:(0,v.jsx)(h.c,{variant:"subtitle2",children:"National Deadline"})}),(0,v.jsx)(l.c,{children:(0,v.jsx)(h.c,{variant:"body2",children:u&&new Date(u.getSubmittedReportById.nationalDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]})]})})}),u&&!u.getSubmittedReportById.message&&(0,v.jsx)(F,{reportId:parseInt(u.getSubmittedReportById.id),onReport:()=>p(),onCancel:()=>x()}),u&&u.getSubmittedReportById.message&&(0,v.jsx)(y,{message:u.getSubmittedReportById.message,files:u.getSubmittedReportById.files,onClose:()=>x()})]})]}),(0,v.jsx)(D.wR,{severity:"error",message:null===m||void 0===m?void 0:m.message})]})}},6773:(e,t,n)=>{n.d(t,{c:()=>j});var i=n(5072),r=n(5656),o=n(9060),s=n(9736),c=n(1412),l=n(6880),a=n(2556),d=n(3456),h=n(2172),x=n(6432),u=n(2496);const m=["className","id"],p=(0,a.cp)(l.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),j=o.forwardRef((function(e,t){const n=(0,d.c)({props:e,name:"MuiDialogTitle"}),{className:l,id:a}=n,j=(0,r.c)(n,m),f=n,v=(e=>{const{classes:t}=e;return(0,c.c)({root:["root"]},h.G,t)})(f),{titleId:g=a}=o.useContext(x.c);return(0,u.jsx)(p,(0,i.c)({component:"h2",className:(0,s.c)(v.root,l),ownerState:f,ref:t,variant:"h6",id:null!=a?a:g},j))}))}}]);
//# sourceMappingURL=5.8f80386b.chunk.js.map