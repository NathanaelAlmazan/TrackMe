"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[460],{5460:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var a=r(9060),i=r(2656),n=r(6773),s=r(4488),o=r(7667),c=r(9e3),l=r(8960),d=r(8320),u=r(9344),f=r(5548),v=r(9572),m=r(2044),p=r(4480),h=r(9732),g=r(3540),x=r(8964),I=r(2496);const y={firstName:"",lastName:"",positionId:"",officeId:"",password:""};function j(e){var t,r;let{open:j,onClose:b,officerId:C,variant:N="create"}=e;const[O,w]=(0,a.useState)(),[P,k]=(0,a.useState)(!1),[S,q]=(0,a.useState)(y),{firstName:B,lastName:R,positionId:W,officeId:F,password:M}=S,{data:U,error:D}=(0,p.U)(x.mq),{data:Q,error:T}=(0,p.U)(x.It),[A,{data:E,error:G}]=(0,h.U)(x.mG),[K,{error:L}]=(0,g.c)(x.uQ),[z,{error:H}]=(0,g.c)(x.Kg),J=e=>{q({...S,[e.target.name]:e.target.value})};(0,a.useEffect)((()=>{C&&A({variables:{uuid:C}}).then((e=>{let{data:t}=e;var r,a;t&&t.getOfficerById&&q({firstName:t.getOfficerById.firstName,lastName:t.getOfficerById.lastName,positionId:(null===(r=t.getOfficerById.position)||void 0===r?void 0:r.id.toString())||"",officeId:(null===(a=t.getOfficerById.office)||void 0===a?void 0:a.id.toString())||"",password:""})}))}),[C,A]);const V=()=>{q(y),b()};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(i.c,{open:j,onClose:V,maxWidth:"sm",fullWidth:!0,children:[(0,I.jsx)(n.c,{children:E?"Edit ".concat((null===(t=E.getOfficerById)||void 0===t?void 0:t.firstName)+" "+(null===(r=E.getOfficerById)||void 0===r?void 0:r.lastName)," Profile"):"Create Officer"}),(0,I.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),C){const e=await z({variables:{uuid:C,firstName:B,lastName:R,positionId:parseInt(W),officeId:parseInt(F),password:"profile"===N?M:null}});e.data&&e.data.updateOfficer?b():w("Failed to update account.")}else{const e=await K({variables:{firstName:B,lastName:R,positionId:parseInt(W),officeId:parseInt(F),password:M}});e.data&&e.data.createOfficer?b():w("Account already exists.")}q(y)},children:[(0,I.jsx)(s.c,{children:(0,I.jsxs)(l.c,{spacing:2,sx:{mb:3},children:[(0,I.jsx)(d.c,{name:"firstName",label:"First Name",value:B,onChange:J,required:!0,fullWidth:!0}),(0,I.jsx)(d.c,{name:"lastName",label:"Last Name",value:R,onChange:J,required:!0,fullWidth:!0}),U&&(0,I.jsx)(d.c,{name:"positionId",select:!0,label:"Position",value:W,onChange:J,required:!0,fullWidth:!0,children:U.getPositions.map((e=>(0,I.jsx)(u.c,{value:e.id,children:e.label},e.id)))}),Q&&(0,I.jsx)(d.c,{name:"officeId",select:!0,label:"Office",value:F,onChange:J,required:!0,fullWidth:!0,children:Q.getOffices.map((e=>(0,I.jsx)(u.c,{value:e.id,children:e.name},e.id)))}),"update"!==N&&(0,I.jsx)(d.c,{name:"password",label:"Temporary Password",type:P?"text":"password",value:M,onChange:J,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,I.jsx)(v.c,{position:"end",children:(0,I.jsx)(f.c,{onClick:()=>k(!P),edge:"end",children:(0,I.jsx)(m.ov,{icon:P?"eva:eye-fill":"eva:eye-off-fill"})})})}})]})}),(0,I.jsxs)(o.c,{children:[(0,I.jsx)(c.c,{onClick:V,color:"inherit",children:"Cancel"}),(0,I.jsx)(c.c,{type:"submit",variant:"contained",color:"inherit",children:"Save"})]})]})]}),(0,I.jsx)(m.wR,{severity:"error",message:(null===D||void 0===D?void 0:D.message)||(null===T||void 0===T?void 0:T.message)||(null===G||void 0===G?void 0:G.message)||(null===L||void 0===L?void 0:L.message)||O||(null===H||void 0===H?void 0:H.message)})]})}},6773:(e,t,r)=>{r.d(t,{c:()=>h});var a=r(5072),i=r(5656),n=r(9060),s=r(9736),o=r(1412),c=r(6880),l=r(2556),d=r(3456),u=r(2172),f=r(6432),v=r(2496);const m=["className","id"],p=(0,l.cp)(c.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),h=n.forwardRef((function(e,t){const r=(0,d.c)({props:e,name:"MuiDialogTitle"}),{className:c,id:l}=r,h=(0,i.c)(r,m),g=r,x=(e=>{const{classes:t}=e;return(0,o.c)({root:["root"]},u.G,t)})(g),{titleId:I=l}=n.useContext(f.c);return(0,v.jsx)(p,(0,a.c)({component:"h2",className:(0,s.c)(x.root,c),ownerState:g,ref:t,variant:"h6",id:null!=l?l:I},h))}))},9732:(e,t,r)=>{r.d(t,{U:()=>l});var a=r(7328),i=r(9528),n=r(2200),s=r(4480),o=r(3960),c=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function l(e,t){var r,l=i.useRef(),d=i.useRef(),u=i.useRef(),f=(0,n.I)(t,l.current||{}),v=null!==(r=null===f||void 0===f?void 0:f.query)&&void 0!==r?r:e;d.current=t,u.current=v;var m=(0,s.a)((0,o.y)(t&&t.client),v),p=m.useQuery((0,a.C3)((0,a.C3)({},f),{skip:!l.current})),h=p.observable.options.initialFetchPolicy||m.getDefaultFetchPolicy(),g=Object.assign(p,{called:!!l.current}),x=i.useMemo((function(){for(var e={},t=function(t){var r=g[t];e[t]=function(){return l.current||(l.current=Object.create(null),m.forceUpdateState()),r.apply(this,arguments)}},r=0,a=c;r<a.length;r++){t(a[r])}return e}),[]);Object.assign(g,x);var I=i.useCallback((function(e){l.current=e?(0,a.C3)((0,a.C3)({},e),{fetchPolicy:e.fetchPolicy||h}):{fetchPolicy:h};var t=(0,n.I)(d.current,(0,a.C3)({query:u.current},l.current)),r=m.executeQuery((0,a.C3)((0,a.C3)({},t),{skip:!1})).then((function(e){return Object.assign(e,x)}));return r.catch((function(){})),r}),[]);return[I,g]}}}]);
//# sourceMappingURL=460.896e1dae.chunk.js.map