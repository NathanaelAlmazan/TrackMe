"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[460],{5460:(e,i,t)=>{t.r(i),t.d(i,{default:()=>N});var a=t(9060),r=t(2656),l=t(6773),o=t(4488),s=t(7667),c=t(9e3),n=t(8960),d=t(8320),f=t(3996),u=t(5084),m=t(4480),v=t(9732),h=t(3540),g=t(8964),p=t(4296),I=t(2496);const x={firstName:"",lastName:"",positionId:"",officeId:""};function N(e){var i,t;let{open:N,onClose:O,officerId:b}=e;const[j,C]=(0,a.useState)(),[y,D]=(0,a.useState)(x),[S,w]=(0,a.useState)([]),{firstName:B,lastName:Q,positionId:J,officeId:R}=y,{data:W,error:k}=(0,m.U)(g.mq),{data:q,error:P}=(0,m.U)(g.It),[E,{data:F,error:U}]=(0,v.U)(g.mG,{fetchPolicy:"no-cache"}),[G,{error:M}]=(0,h.c)(g.uQ),[T,{error:A}]=(0,h.c)(g.Kg),K=e=>{D({...y,[e.target.name]:e.target.value})};(0,a.useEffect)((()=>{if(y.officeId&&null!==W&&void 0!==W&&W.getPositions&&null!==q&&void 0!==q&&q.getOffices){const e=q.getOffices.find((e=>e.id===y.officeId));e&&w(function(e,i){return e.includes("Regional Director")?i.filter((e=>e.role===p.QJ.Director)):e.includes("Division")?i.filter((e=>e.role===p.QJ.Chief&&e.label.includes("Chief")||e.role===p.QJ.Officer)):e.includes("Revenue District Office")?i.filter((e=>e.role===p.QJ.Chief&&e.label.includes("District Officer")||e.role===p.QJ.Officer)):i.filter((e=>e.role===p.QJ.Officer))}(e.name,W.getPositions.map((e=>({id:e.id,label:e.label,role:e.role})))))}}),[y.officeId,q,W]),(0,a.useEffect)((()=>{b&&E({variables:{uuid:b}}).then((e=>{let{data:i}=e;var t,a;i&&i.getOfficerById&&D({firstName:i.getOfficerById.firstName,lastName:i.getOfficerById.lastName,positionId:(null===(t=i.getOfficerById.position)||void 0===t?void 0:t.id.toString())||"",officeId:(null===(a=i.getOfficerById.office)||void 0===a?void 0:a.id.toString())||""})}))}),[b,E]);const L=()=>{D(x),O()};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(r.c,{open:N,onClose:L,maxWidth:"sm",fullWidth:!0,children:[(0,I.jsx)(l.c,{children:F?"Edit ".concat((null===(i=F.getOfficerById)||void 0===i?void 0:i.firstName)+" "+(null===(t=F.getOfficerById)||void 0===t?void 0:t.lastName)," Profile"):"Create Officer"}),(0,I.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b){const e=await T({variables:{uuid:b,firstName:B.trim(),lastName:Q.trim(),positionId:parseInt(J),officeId:parseInt(R)}});e.data&&e.data.updateOfficer?O():C("Failed to update account.")}else{const e=await G({variables:{firstName:B.trim(),lastName:Q.trim(),positionId:parseInt(J),officeId:parseInt(R)}});e.data&&e.data.createOfficer?O():C("Account already exists.")}D(x)},children:[(0,I.jsx)(o.c,{children:(0,I.jsxs)(n.c,{spacing:2,sx:{mb:3},children:[(0,I.jsx)(d.c,{name:"firstName",label:"First Name",value:B,onChange:K,required:!0,fullWidth:!0}),(0,I.jsx)(d.c,{name:"lastName",label:"Last Name",value:Q,onChange:K,required:!0,fullWidth:!0}),q&&(0,I.jsx)(d.c,{name:"officeId",select:!0,label:"Office",value:R,onChange:K,required:!0,fullWidth:!0,children:q.getOffices.map((e=>(0,I.jsx)(f.c,{value:e.id,children:e.name},e.id)))}),W&&(0,I.jsx)(d.c,{name:"positionId",select:!0,label:"Position",value:J,onChange:K,required:!0,fullWidth:!0,children:S.map((e=>(0,I.jsx)(f.c,{value:e.id,children:e.label},e.id)))})]})}),(0,I.jsxs)(s.c,{children:[(0,I.jsx)(c.c,{onClick:L,color:"inherit",children:"Cancel"}),(0,I.jsx)(c.c,{type:"submit",variant:"contained",color:"inherit",children:"Save"})]})]})]}),(0,I.jsx)(u.wR,{severity:"error",message:(null===k||void 0===k?void 0:k.message)||(null===P||void 0===P?void 0:P.message)||(null===U||void 0===U?void 0:U.message)||(null===M||void 0===M?void 0:M.message)||j||(null===A||void 0===A?void 0:A.message)})]})}},6773:(e,i,t)=>{t.d(i,{c:()=>g});var a=t(5072),r=t(5656),l=t(9060),o=t(9736),s=t(1412),c=t(6880),n=t(2556),d=t(3456),f=t(2172),u=t(6432),m=t(2496);const v=["className","id"],h=(0,n.cp)(c.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,i)=>i.root})({padding:"16px 24px",flex:"0 0 auto"}),g=l.forwardRef((function(e,i){const t=(0,d.c)({props:e,name:"MuiDialogTitle"}),{className:c,id:n}=t,g=(0,r.c)(t,v),p=t,I=(e=>{const{classes:i}=e;return(0,s.c)({root:["root"]},f.G,i)})(p),{titleId:x=n}=l.useContext(u.c);return(0,m.jsx)(h,(0,a.c)({component:"h2",className:(0,o.c)(I.root,c),ownerState:p,ref:i,variant:"h6",id:null!=n?n:x},g))}))}}]);
//# sourceMappingURL=460.e0cc8e0d.chunk.js.map