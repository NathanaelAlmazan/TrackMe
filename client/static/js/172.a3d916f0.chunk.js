"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[172],{9172:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(9060),i=n(9072),o=n(7348),a=n(5548),s=n(6880),c=n(2020),l=n(3692),d=n(6820),u=n(3358),f=n(6768),h=n(1424),x=n(2496);function v(e){let{onRefresh:t,onFilter:n}=e;return(0,x.jsx)(f.c,{sx:{height:96,display:"flex",justifyContent:"flex-end",p:e=>e.spacing(0,1,0,3)},children:(0,x.jsxs)(i.c,{direction:"row",children:[(0,x.jsx)(u.c,{title:"Filter",children:(0,x.jsx)(a.c,{onClick:n,children:(0,x.jsx)(h.ov,{icon:"fluent:filter-20-filled"})})}),(0,x.jsx)(u.c,{title:"Refresh",children:(0,x.jsx)(a.c,{onClick:t,children:(0,x.jsx)(h.ov,{icon:"mdi:refresh"})})})]})})}var p=n(4296),m=n(4194),g=n(9720),b=n(3540),j=n(7976);const C=(0,r.lazy)((()=>Promise.all([n.e(448),n.e(780),n.e(848)]).then(n.bind(n,3848)))),w=(0,r.lazy)((()=>Promise.resolve().then(n.bind(n,8280))));function k(e,t){if(t)return e&&[p.QJ.Superuser,p.QJ.Director].includes(e)?void 0:parseInt(t)}function S(){const e=(0,m.eu)("up","lg","xl"),{office:t,role:n}=(0,m.Cq)((e=>e.auth)),[u,f]=(0,r.useState)(!1),[S,I]=(0,r.useState)(!1),[M,D]=(0,r.useState)([]),[R,y]=(0,r.useState)(null),[E,W]=(0,r.useState)(new Date),[O,G]=(0,r.useState)(new Date),{data:T,error:N,refetch:$}=(0,g.UL)(j.UJ,{variables:{officeId:k(n,t),date:new Date(E).toISOString()}}),[L,{error:P}]=(0,b.c)(j.cx);(0,r.useEffect)((()=>{$({officeId:k(n,t),date:new Date(E).toISOString()})}),[E,n,t,$]);const U=(0,r.useMemo)((()=>T?T.getEvents.filter((e=>e.type&&M.includes(e.type)||0===M.length)):[]),[T,M]),_=()=>{f(!u),y(null),$({officeId:k(n,t),date:new Date(E).toISOString()})};return(0,x.jsxs)(c.c,{children:[(0,x.jsxs)(i.c,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,x.jsxs)(i.c,{direction:"row",alignItems:"center",justifyContent:"start",children:[(0,x.jsx)(a.c,{onClick:e=>{const t=new Date(E);t.setMonth(t.getMonth()-1),W(t)},children:(0,x.jsx)(h.ov,{icon:"uil:arrow-left"})}),(0,x.jsx)(s.c,{variant:"h4",children:new Date(E).toLocaleDateString(void 0,{month:"short",year:"numeric"}).toUpperCase()}),(0,x.jsx)(a.c,{onClick:e=>{const t=new Date(E);t.setMonth(t.getMonth()+1),W(t)},children:(0,x.jsx)(h.ov,{icon:"uil:arrow-right"})})]}),(0,x.jsxs)(i.c,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:[(n===p.QJ.Director||n===p.QJ.Chief)&&(0,x.jsx)(o.c,{onClick:_,variant:"contained",color:"inherit",startIcon:(0,x.jsx)(h.ov,{icon:"eva:plus-fill"}),children:"Create"}),(0,x.jsx)(d.gf,{document:(0,x.jsx)(h._M,{events:U,currentDate:E}),fileName:`${new Date(E).toLocaleDateString(void 0,{month:"short",year:"numeric"}).toUpperCase()}.pdf`,children:t=>{let{url:n}=t;return n&&(e?(0,x.jsx)(o.c,{variant:"outlined",onClick:()=>window.open(n,"_blank"),startIcon:(0,x.jsx)(h.ov,{icon:"ant-design:export-outlined"}),sx:{color:"black",borderColor:"black"},children:"Export"}):(0,x.jsx)(o.c,{variant:"outlined",onClick:()=>window.open(n,"_blank"),sx:{color:"black",borderColor:"black"},children:(0,x.jsx)(h.ov,{icon:"ant-design:export-outlined"})}))}})]})]}),(0,x.jsxs)(l.c,{children:[(0,x.jsx)(v,{onRefresh:()=>$(),onFilter:()=>I(!S)}),(0,x.jsx)(h.Yf,{events:U,officeId:k(n,t),currentDate:E,selectedDate:O,onSelectDate:e=>G(e),onEditEvent:(e,t)=>{y(t),f(!0)},onDeleteEvent:async(e,r)=>{await L({variables:{id:r}}),$({officeId:k(n,t),date:new Date(E).toISOString()})}})]}),(0,x.jsx)(h.c1,{children:(0,x.jsx)(w,{open:S,selected:M,onFilter:e=>{const t=M.indexOf(e);let n=[];-1===t?n=n.concat(M,e):0===t?n=n.concat(M.slice(1)):t===M.length-1?n=n.concat(M.slice(0,-1)):t>0&&(n=n.concat(M.slice(0,t),M.slice(t+1))),D(n)},onClose:()=>I(!S),onClear:()=>D([]),filters:[{name:"Types",options:[{label:"Event",value:"EVENT"},{label:"HR Report",value:"HR_REPORT"},{label:"Admin Report",value:"ADMIN_REPORT"},{label:"Document",value:"DOCUMENT"}]}]})}),(0,x.jsx)(h.c1,{children:(0,x.jsx)(C,{eventId:R,selectedDate:O,open:u,onClose:_,role:n,officeId:t})}),(0,x.jsx)(h.wR,{severity:"error",message:(null===N||void 0===N?void 0:N.message)||(null===P||void 0===P?void 0:P.message)})]})}},2020:(e,t,n)=>{n.d(t,{c:()=>w});var r=n(5656),i=n(5072),o=n(9060),a=n(9736),s=n(816),c=n(7067),l=n(5152),d=n(6628),u=n(1512),f=n(9948),h=n(2496);const x=["className","component","disableGutters","fixed","maxWidth","classes"],v=(0,f.c)(),p=(0,u.c)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,l.c)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),m=e=>(0,d.c)({props:e,name:"MuiContainer",defaultTheme:v});var g=n(5832),b=n(2556),j=n(2128);const C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=p,useThemeProps:n=m,componentName:d="MuiContainer"}=e,u=t((e=>{let{theme:t,ownerState:n}=e;return(0,i.c)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:`${i}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,i.c)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}})})),f=o.forwardRef((function(e,t){const o=n(e),{className:f,component:v="div",disableGutters:p=!1,fixed:m=!1,maxWidth:g="lg"}=o,b=(0,r.c)(o,x),j=(0,i.c)({},o,{component:v,disableGutters:p,fixed:m,maxWidth:g}),C=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e,a={root:["root",o&&`maxWidth${(0,l.c)(String(o))}`,r&&"fixed",i&&"disableGutters"]};return(0,c.c)(a,(e=>(0,s.cp)(t,e)),n)})(j,d);return(0,h.jsx)(u,(0,i.c)({as:v,ownerState:j,className:(0,a.c)(C.root,f),ref:t},b))}));return f}({createStyledComponent:(0,b.cp)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,g.c)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,j.C)({props:e,name:"MuiContainer"})}),w=C},3540:(e,t,n)=>{n.d(t,{c:()=>u});var r=n(7328),i=n(9528),o=n(6172),a=n(3520),s=n(9179),c=n(4056),l=n(1579),d=n(4268);function u(e,t){var n=(0,l.y)(null===t||void 0===t?void 0:t.client);(0,s.Y5)(e,s.UT.Mutation);var u=i.useState({called:!1,loading:!1,client:n}),f=u[0],h=u[1],x=i.useRef({result:f,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});(0,d.M)((function(){Object.assign(x.current,{client:n,options:t,mutation:e})}));var v=i.useCallback((function(e){void 0===e&&(e={});var t=x.current,n=t.options,i=t.mutation,s=(0,r.C3)((0,r.C3)({},n),{mutation:i}),l=e.client||x.current.client;x.current.result.loading||s.ignoreResults||!x.current.isMounted||h(x.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:l});var d=++x.current.mutationId,u=(0,o.I)(s,e);return l.mutate(u).then((function(t){var n,r,i=t.data,o=t.errors,s=o&&o.length>0?new c._M({graphQLErrors:o}):void 0,f=e.onError||(null===(n=x.current.options)||void 0===n?void 0:n.onError);if(s&&f&&f(s,u),d===x.current.mutationId&&!u.ignoreResults){var v={called:!0,loading:!1,data:i,error:s,client:l};x.current.isMounted&&!(0,a.y)(x.current.result,v)&&h(x.current.result=v)}var p=e.onCompleted||(null===(r=x.current.options)||void 0===r?void 0:r.onCompleted);return s||null===p||void 0===p||p(t.data,u),t})).catch((function(t){var n;if(d===x.current.mutationId&&x.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:l};(0,a.y)(x.current.result,r)||h(x.current.result=r)}var i=e.onError||(null===(n=x.current.options)||void 0===n?void 0:n.onError);if(i)return i(t,u),{data:void 0,errors:t};throw t}))}),[]),p=i.useCallback((function(){if(x.current.isMounted){var e={called:!1,loading:!1,client:x.current.client};Object.assign(x.current,{mutationId:0,result:e}),h(e)}}),[]);return i.useEffect((function(){var e=x.current;return e.isMounted=!0,function(){e.isMounted=!1}}),[]),[v,(0,r.C3)({reset:p},f)]}}}]);
//# sourceMappingURL=172.a3d916f0.chunk.js.map