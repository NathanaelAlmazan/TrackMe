{"version":3,"file":"static/js/5.f8a9ddb6.chunk.js","mappings":"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","sources":["sections/reports/report-dialog/SubmissionCard.tsx","sections/reports/report-dialog/SubmissionField.tsx","sections/reports/report-dialog/index.tsx","../node_modules/@mui/material/CardActions/cardActionsClasses.js","../node_modules/@mui/material/CardActions/CardActions.js","../node_modules/@mui/material/DialogTitle/DialogTitle.js"],"sourcesContent":["import Card from '@mui/material/Card';\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CardActions from '@mui/material/CardActions';\r\nimport Box from '@mui/material/Box';\r\nimport Stack from '@mui/material/Stack';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport { Iconify } from '../../../components';\r\n\r\nexport function extractFileName(url: string) {\r\n    const paths = url.split('_');\r\n    return paths[paths.length - 1];\r\n}\r\n\r\nexport default function SubmissionCard({ \r\n    message,\r\n    files,\r\n    onEdit,\r\n    onClose\r\n}: \r\n{ \r\n    message?: string | null,\r\n    files?: string[] | null,\r\n    onEdit: () => void,\r\n    onClose: () => void\r\n}) {\r\n    return (\r\n        <Stack spacing={2}>\r\n            <Card>\r\n                <CardHeader \r\n                    action={\r\n                        <Tooltip title='Edit Report'>\r\n                            <IconButton aria-label=\"settings\" onClick={onEdit}>\r\n                                <Iconify icon='akar-icons:edit' />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    }\r\n                />\r\n                <CardContent>\r\n                    <Typography variant='body1'>\r\n                        {message}\r\n                    </Typography>\r\n                </CardContent>\r\n                {files && files.length > 0 && (\r\n                    <CardActions sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                        <Box sx={{ maxWidth: '100%', overflow: 'auto', display: 'flex', flexDirection: 'row' }}>\r\n                            {files.map(file => (\r\n                                <Typography \r\n                                    key={file} \r\n                                    component='a' \r\n                                    variant='body2' \r\n                                    href={file.trim()}\r\n                                    target='_blank'\r\n                                    sx={{ mx: '5px'}}\r\n                                >\r\n                                    {extractFileName(file)}\r\n                                </Typography>\r\n                            ))}\r\n                        </Box>\r\n                    </CardActions>\r\n                )}\r\n            </Card>\r\n\r\n            <Stack direction='row' spacing={2} alignItems='end' justifyContent='flex-end'>\r\n                <Button color='inherit' onClick={onClose}>Close</Button>\r\n            </Stack>\r\n        </Stack>\r\n    );\r\n}","import React, { useState } from 'react';\r\n\r\nimport TextField from '@mui/material/TextField';\r\nimport Stack from '@mui/material/Stack';\r\nimport Box from '@mui/material/Box';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport Chip from '@mui/material/Chip';\r\nimport Button from '@mui/material/Button';\r\nimport { Iconify, Snackbar } from '../../../components';\r\n\r\nimport axios from 'axios';\r\n\r\nimport { useMutation } from '@apollo/client';\r\nimport { SUBMIT_REPORT } from '../../../graphql/reports';\r\n\r\n\r\nexport type MessageFiles = {\r\n    fileUrl: string;\r\n    fileName: string;\r\n    fileType: string;\r\n}\r\n\r\nfunction convertFileListToArray(fileList: FileList): File[] {\r\n    const filesArray: File[] = [];\r\n    \r\n    // Convert FileList to array\r\n    for (let i = 0; i < fileList.length; i++) {\r\n      const file = fileList.item(i);\r\n      if (file) {\r\n        filesArray.push(file);\r\n      }\r\n    }\r\n  \r\n    return filesArray;\r\n}\r\n\r\nexport default function SubmissionField(\r\n{ \r\n    content,\r\n    reportId, \r\n    onReport, \r\n    onCancel \r\n}: { \r\n    content?: string | null,\r\n    reportId: number, \r\n    onReport: () => void, \r\n    onCancel: () => void \r\n}) {\r\n    const [message, setMessage] = useState<string>(content || \"\");\r\n    const [files, setFiles] = useState<File[]>([]);\r\n    const [formError, setFormError] = useState<string>();\r\n\r\n    const [submitReport, { error: submitError }] = useMutation(SUBMIT_REPORT);\r\n\r\n\r\n    const handleFilesChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const fileList = event.target.files;\r\n        if (fileList) {\r\n\r\n            setFiles(previous => previous.concat(convertFileListToArray(fileList)));\r\n        }\r\n    }\r\n\r\n    const handleDelete = (fileName: string) => {\r\n        setFiles(previous => previous.filter(file => file.name !== fileName));\r\n    }\r\n\r\n    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n\r\n        // upload files\r\n        let uploadedFiles: MessageFiles[] = [];\r\n        if (files.length > 0) {\r\n            try {\r\n                const form = new FormData();\r\n                files.forEach((file) => {\r\n                    form.append(\"files\", file);\r\n                });\r\n\r\n                const result = await axios.post(process.env.REACT_APP_MEDIA_URL as string, form);\r\n                uploadedFiles = result.data.files;\r\n            } catch (err) {\r\n                setFormError(\"Failed to upload files.\");\r\n                return\r\n            }\r\n        }\r\n\r\n        // create comment\r\n        await submitReport({\r\n            variables:{\r\n                id: reportId,\r\n                message: message,\r\n                files: uploadedFiles.map(file => file.fileUrl)\r\n            }\r\n        });\r\n\r\n        onReport(); // reload\r\n        setMessage(\"\"); // reset message\r\n        setFiles([]); // reset files\r\n        onCancel();\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <Box \r\n            component='form'\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <Stack spacing={2}>\r\n                <Box sx={{ maxWidth: '100%', overflow: 'auto', display: 'flex', flexDirection: 'row' }}>\r\n                    {files.map(file => (\r\n                        <Chip key={file.name} label={file.name} variant=\"outlined\" onDelete={() => handleDelete(file.name)} sx={{ mx: '5px' }} />\r\n                    ))}\r\n                </Box>\r\n\r\n                <TextField \r\n                    variant='outlined'\r\n                    placeholder='Report...' \r\n                    value={message}\r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    multiline\r\n                    rows={3}\r\n                    required\r\n                    fullWidth \r\n                    InputProps={{\r\n                        endAdornment: \r\n                            <InputAdornment position=\"end\">\r\n                                <Tooltip title='Insert File'>\r\n                                    <IconButton component='label'>\r\n                                        <Iconify icon='material-symbols:attach-file-add-rounded' />\r\n\r\n                                        <input \r\n                                            type='file' \r\n                                            multiple\r\n                                            hidden \r\n                                            style={{ display: 'none' }}\r\n                                            onChange={handleFilesChange}\r\n                                        />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                            </InputAdornment>,\r\n                    }}\r\n                />\r\n\r\n                <Stack direction='row' spacing={2} alignItems='end' justifyContent='flex-end'>\r\n                    <Button color='inherit' onClick={onCancel}>Cancel</Button>\r\n                    <Button type='submit' variant='contained' color='inherit'>Submit</Button>\r\n                </Stack>\r\n            </Stack>\r\n        </Box>\r\n\r\n        <Snackbar \r\n            severity='error' \r\n            message={submitError?.message || formError} \r\n        />\r\n\r\n        </>\r\n    );\r\n}","import Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nimport SubmissionCard from './SubmissionCard';\r\nimport SubmissionField from './SubmissionField';\r\nimport { Snackbar } from '../../../components';\r\n\r\nimport { useQuery } from '@apollo/client';\r\nimport { GET_SUBMISSION_BY_ID } from '../../../graphql/reports';\r\nimport { parseType } from '..';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function ReportDialog({ reportId, open, onClose }: { reportId: number, open: boolean, onClose: () => void }) {\r\n    const [edit, setEdit] = useState<boolean>(true);\r\n    const { data: report, error: getError, refetch } = useQuery(GET_SUBMISSION_BY_ID, {\r\n        fetchPolicy: 'no-cache',\r\n        variables: {\r\n            id: reportId\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (report && !report.getSubmittedReportById.message) setEdit(true);\r\n        else setEdit(false);\r\n    }, [report]);\r\n    \r\n    return (\r\n        <>\r\n        <Dialog open={open} onClose={onClose} maxWidth='sm' fullWidth>\r\n            <DialogTitle component='div'>\r\n                <Typography variant='h4'>\r\n                    {report?.getSubmittedReportById.report.name}\r\n                </Typography>\r\n                <Typography variant='body1'>\r\n                    {parseType(report?.getSubmittedReportById.report.type)}\r\n                </Typography>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <TableContainer>\r\n                    <Table size=\"small\" aria-label=\"dense table\" sx={{ mb: 2 }}>\r\n                        <TableBody>\r\n                            <TableRow>\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    <Typography variant=\"subtitle2\" noWrap>\r\n                                        Report Basis\r\n                                    </Typography>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <Typography variant=\"body2\">\r\n                                        {report?.getSubmittedReportById.report.basis}\r\n                                    </Typography>\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    <Typography variant=\"subtitle2\" noWrap>\r\n                                        Report Office\r\n                                    </Typography>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <Typography variant=\"body2\">\r\n                                        {report?.getSubmittedReportById.office.name}\r\n                                    </Typography>\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    <Typography variant=\"subtitle2\" noWrap>\r\n                                        Regional Deadline\r\n                                    </Typography>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <Typography variant=\"body2\">\r\n                                        {report && new Date(report.getSubmittedReportById.localDue).toLocaleDateString(undefined, {\r\n                                            year: 'numeric',\r\n                                            month: 'short',\r\n                                            day: 'numeric',\r\n                                            weekday: 'short'\r\n                                        })}\r\n                                    </Typography>\r\n                                </TableCell>\r\n                            </TableRow>\r\n\r\n                            <TableRow>\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    <Typography variant=\"subtitle2\" noWrap>\r\n                                        National Deadline\r\n                                    </Typography>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <Typography variant=\"body2\">\r\n                                        {report && new Date(report.getSubmittedReportById.nationalDue).toLocaleDateString(undefined, {\r\n                                            year: 'numeric',\r\n                                            month: 'short',\r\n                                            day: 'numeric',\r\n                                            weekday: 'short'\r\n                                        })}\r\n                                    </Typography>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n\r\n                {(report && edit) ? (\r\n                    <SubmissionField \r\n                        content={report.getSubmittedReportById.message}\r\n                        reportId={parseInt(report.getSubmittedReportById.id)} \r\n                        onReport={() => refetch()} \r\n                        onCancel={() => onClose()}\r\n                    />\r\n                ) : (\r\n                    <SubmissionCard \r\n                        message={report?.getSubmittedReportById.message}\r\n                        files={report?.getSubmittedReportById.files}\r\n                        onEdit={() => setEdit(!edit)}\r\n                        onClose={() => onClose()}\r\n                    />\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n\r\n        <Snackbar \r\n            severity='error' \r\n            message={getError?.message} \r\n        />\r\n        </>\r\n    );\r\n}","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardActionsUtilityClass(slot) {\n  return generateUtilityClass('MuiCardActions', slot);\n}\nconst cardActionsClasses = generateUtilityClasses('MuiCardActions', ['root', 'spacing']);\nexport default cardActionsClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"disableSpacing\", \"className\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base/composeClasses';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getCardActionsUtilityClass } from './cardActionsClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disableSpacing\n  } = ownerState;\n  const slots = {\n    root: ['root', !disableSpacing && 'spacing']\n  };\n  return composeClasses(slots, getCardActionsUtilityClass, classes);\n};\nconst CardActionsRoot = styled('div', {\n  name: 'MuiCardActions',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableSpacing && styles.spacing];\n  }\n})(({\n  ownerState\n}) => _extends({\n  display: 'flex',\n  alignItems: 'center',\n  padding: 8\n}, !ownerState.disableSpacing && {\n  '& > :not(style) ~ :not(style)': {\n    marginLeft: 8\n  }\n}));\nconst CardActions = /*#__PURE__*/React.forwardRef(function CardActions(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiCardActions'\n  });\n  const {\n      disableSpacing = false,\n      className\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    disableSpacing\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardActionsRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardActions.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the actions do not have additional margin.\n   * @default false\n   */\n  disableSpacing: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default CardActions;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"id\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base/composeClasses';\nimport Typography from '../Typography';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getDialogTitleUtilityClass } from './dialogTitleClasses';\nimport DialogContext from '../Dialog/DialogContext';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getDialogTitleUtilityClass, classes);\n};\nconst DialogTitleRoot = styled(Typography, {\n  name: 'MuiDialogTitle',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})({\n  padding: '16px 24px',\n  flex: '0 0 auto'\n});\nconst DialogTitle = /*#__PURE__*/React.forwardRef(function DialogTitle(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiDialogTitle'\n  });\n  const {\n      className,\n      id: idProp\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  const {\n    titleId = idProp\n  } = React.useContext(DialogContext);\n  return /*#__PURE__*/_jsx(DialogTitleRoot, _extends({\n    component: \"h2\",\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref,\n    variant: \"h6\",\n    id: idProp != null ? idProp : titleId\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogTitle.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * @ignore\n   */\n  id: PropTypes.string,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default DialogTitle;"],"names":["extractFileName","url","paths","split","length","SubmissionCard","_ref","message","files","onEdit","onClose","_jsxs","Stack","spacing","children","Card","_jsx","CardHeader","action","Tooltip","title","IconButton","onClick","Iconify","icon","CardContent","Typography","variant","CardActions","sx","display","justifyContent","Box","maxWidth","overflow","flexDirection","map","file","component","href","trim","target","mx","direction","alignItems","Button","color","SubmissionField","content","reportId","onReport","onCancel","setMessage","useState","setFiles","formError","setFormError","submitReport","error","submitError","useMutation","SUBMIT_REPORT","_Fragment","onSubmit","async","event","preventDefault","uploadedFiles","form","FormData","forEach","append","axios","post","process","data","err","variables","id","fileUrl","Chip","label","name","onDelete","handleDelete","fileName","previous","filter","TextField","placeholder","value","onChange","e","multiline","rows","required","fullWidth","InputProps","endAdornment","InputAdornment","position","type","multiple","hidden","style","fileList","concat","filesArray","i","item","push","convertFileListToArray","Snackbar","severity","ReportDialog","open","edit","setEdit","report","getError","refetch","useQuery","GET_SUBMISSION_BY_ID","fetchPolicy","useEffect","getSubmittedReportById","Dialog","DialogTitle","parseType","DialogContent","TableContainer","Table","size","mb","TableBody","TableRow","TableCell","scope","noWrap","basis","office","Date","localDue","toLocaleDateString","undefined","year","month","day","weekday","nationalDue","parseInt","getCardActionsUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CardActionsRoot","styled","overridesResolver","props","styles","ownerState","root","disableSpacing","_extends","padding","marginLeft","React","inProps","ref","useThemeProps","className","other","_objectWithoutPropertiesLoose","classes","slots","composeClasses","useUtilityClasses","clsx","DialogTitleRoot","flex","idProp","getDialogTitleUtilityClass","titleId","DialogContext"],"sourceRoot":""}