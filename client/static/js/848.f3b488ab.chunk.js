"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[848],{3848:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var i=t(9060),a=t(2656),s=t(6773),l=t(4488),r=t(7667),c=t(9572),o=t(9e3),d=t(5548),u=t(2112),p=t(3358),h=t(5448),m=t(8960),x=t(8320),v=t(9344),g=t(7868),j=t.n(g),f=t(8372),b=t(4864),y=t(7976),I=t(4480),D=t(9732),w=t(3540),E=t(2496);const S={reportId:"",subject:"",image:"",description:"",frequency:"NONE"};function C(e){let{eventId:n,selectedDate:t,open:g,onClose:C}=e;const{data:q,error:N}=(0,I.U)(y.ei),[R,{error:O}]=(0,D.U)(y.wP,{fetchPolicy:"no-cache"}),[T,W]=(0,i.useState)(null),[k,A]=(0,i.useState)(S),[B,F]=(0,i.useState)(j()(t)),[M,P]=(0,i.useState)(j()(t)),[Y,U]=(0,i.useState)(j()(t)),{subject:L,description:G,frequency:H,reportId:K}=k,[Q,{error:V}]=(0,w.c)(y.Ki),[z,{error:J}]=(0,w.c)(y.cn),[X,{error:Z}]=(0,w.c)(y.cQ);(0,i.useEffect)((()=>{n?R({variables:{id:n}}).then((e=>{let{data:n}=e;n&&(A({subject:n.getEventById.subject,description:n.getEventById.description,frequency:n.getEventById.frequency,image:n.getEventById.image,reportId:""}),F(j()(new Date(n.getEventById.date))))})):(A(S),F(j()(new Date)))}),[n,R]),(0,i.useEffect)((()=>{F(j()(t)),P(j()(t)),U(j()(t))}),[t]);const $=e=>{A({...k,[e.target.name]:e.target.value})};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.c,{open:g,onClose:C,maxWidth:"sm",fullWidth:!0,children:(0,E.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),K)await X({variables:{reportId:parseInt(K),localDue:M.toISOString(),nationalDue:Y.toISOString()}});else{let e=null;if(T){const n=new FormData;n.append("files",T);const t=await f.c.post("https://rr6manila.com/api/upload",n);if(t.data){e=t.data.files[0].fileUrl}}n?await z({variables:{id:n,subject:L,description:G,image:e,date:B.toISOString(),frequency:H}}):await Q({variables:{subject:L,description:G,image:e,date:B.toISOString(),frequency:H}})}A(S),F(j()(new Date(t))),P(j()(new Date(t))),U(j()(new Date(t))),C()},children:[n?(0,E.jsx)(s.c,{children:"Edit Event"}):(0,E.jsx)(u.c,{sx:{pt:2},children:"ADD EVENT"}),(0,E.jsxs)(l.c,{children:[(0,E.jsxs)(h.cp,{container:!0,spacing:3,children:[(0,E.jsx)(h.cp,{item:!0,xs:12,children:(0,E.jsx)(x.c,{name:"subject",label:"Event Name",variant:"outlined",value:L,onChange:$,fullWidth:!0,required:!K})}),(0,E.jsx)(h.cp,{item:!0,xs:12,children:(0,E.jsx)(x.c,{name:"description",label:"Description",variant:"outlined",value:G,onChange:$,fullWidth:!0,required:!K,helperText:(null===T||void 0===T?void 0:T.name)||k.image,InputProps:{endAdornment:(0,E.jsx)(c.c,{position:"end",children:(0,E.jsx)(p.c,{title:"Attach Image",children:(0,E.jsxs)(d.c,{component:"label",edge:"end",children:[(0,E.jsx)(b.ov,{icon:"tdesign:image-add"}),(0,E.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&W(e.target.files[0])},style:{display:"none"},hidden:!0})]})})})}})}),(0,E.jsx)(h.cp,{item:!0,xs:12,sm:6,md:6,children:(0,E.jsx)(b.I4,{label:"Event Date",value:B,onChange:e=>{e&&F(e)}})}),(0,E.jsx)(h.cp,{item:!0,xs:12,sm:6,md:6,children:(0,E.jsxs)(x.c,{name:"frequency",select:!0,label:"Frequency",variant:"outlined",value:H,onChange:$,required:!K,fullWidth:!0,children:[(0,E.jsx)(v.c,{value:"NONE",children:"None"}),(0,E.jsx)(v.c,{value:"MONTHLY",children:"Monthly"}),(0,E.jsx)(v.c,{value:"YEARLY",children:"Yearly"})]})})]}),!n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(u.c,{sx:{py:2},children:"OR ADD REPORT"}),(0,E.jsxs)(h.cp,{container:!0,spacing:3,children:[(0,E.jsx)(h.cp,{item:!0,xs:12,children:(0,E.jsx)(x.c,{name:"reportId",select:!0,label:"Report",variant:"outlined",value:K,onChange:$,required:!!K,fullWidth:!0,children:q&&q.getReports.map((e=>(0,E.jsx)(v.c,{value:e.id,children:e.name},e.id)))})}),(0,E.jsx)(h.cp,{item:!0,xs:12,sm:6,md:6,children:(0,E.jsx)(b.I4,{label:"Regional Deadline",value:M,onChange:e=>{e&&P(e)}})}),(0,E.jsx)(h.cp,{item:!0,xs:12,sm:6,md:6,children:(0,E.jsx)(b.I4,{label:"National Deadline",value:Y,onChange:e=>{e&&U(e)}})})]})]})]}),(0,E.jsx)(r.c,{children:(0,E.jsxs)(m.c,{direction:"row",spacing:2,children:[(0,E.jsx)(o.c,{onClick:C,color:"inherit",children:"Cancel"}),(0,E.jsx)(o.c,{variant:"contained",color:"inherit",type:"submit",children:"Save"})]})})]})}),(0,E.jsx)(b.wR,{severity:"error",message:(null===V||void 0===V?void 0:V.message)||(null===O||void 0===O?void 0:O.message)||(null===J||void 0===J?void 0:J.message)||(null===N||void 0===N?void 0:N.message)||(null===Z||void 0===Z?void 0:Z.message)})]})}},6773:(e,n,t)=>{t.d(n,{c:()=>v});var i=t(5072),a=t(5656),s=t(9060),l=t(9736),r=t(1412),c=t(6880),o=t(2556),d=t(3456),u=t(2172),p=t(6432),h=t(2496);const m=["className","id"],x=(0,o.cp)(c.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),v=s.forwardRef((function(e,n){const t=(0,d.c)({props:e,name:"MuiDialogTitle"}),{className:c,id:o}=t,v=(0,a.c)(t,m),g=t,j=(e=>{const{classes:n}=e;return(0,r.c)({root:["root"]},u.G,n)})(g),{titleId:f=o}=s.useContext(p.c);return(0,h.jsx)(x,(0,i.c)({component:"h2",className:(0,l.c)(j.root,c),ownerState:g,ref:n,variant:"h6",id:null!=o?o:f},v))}))}}]);
//# sourceMappingURL=848.f3b488ab.chunk.js.map