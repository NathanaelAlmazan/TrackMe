"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5],{8005:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var i=n(2656),r=n(6773),o=n(4488),s=n(3856),c=n(9504),a=n(700),l=n(9904),d=n(7454),p=n(6880),u=n(3692),h=n(1096),x=n(4436),m=n(5364),j=n(7256),f=n(8960),v=n(9e3),g=n(5548),y=n(3358),b=n(4864),S=n(2496);function w(e){const t=e.split("_");return t[t.length-1]}function R(e){let{message:t,files:n,onEdit:i,onClose:r}=e;return(0,S.jsxs)(f.c,{spacing:2,children:[(0,S.jsxs)(u.c,{children:[(0,S.jsx)(h.c,{action:(0,S.jsx)(y.c,{title:"Edit Report",children:(0,S.jsx)(g.c,{"aria-label":"settings",onClick:i,children:(0,S.jsx)(b.ov,{icon:"akar-icons:edit"})})})}),(0,S.jsx)(x.c,{children:(0,S.jsx)(p.c,{variant:"body1",children:t})}),n&&n.length>0&&(0,S.jsx)(m.c,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,S.jsx)(j.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:n.map((e=>(0,S.jsx)(p.c,{component:"a",variant:"body2",href:e.trim(),target:"_blank",sx:{mx:"5px"},children:w(e)},e)))})})]}),(0,S.jsx)(f.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:(0,S.jsx)(v.c,{color:"inherit",onClick:r,children:"Close"})})]})}var C=n(9060),I=n(8320),D=n(9572),B=n(7532),k=n(8372),W=n(3540),N=n(7976);function A(e){let{content:t,reportId:n,onReport:i,onCancel:r}=e;const[o,s]=(0,C.useState)(t||""),[c,a]=(0,C.useState)([]),[l,d]=(0,C.useState)(),[p,{error:u}]=(0,W.c)(N.aA);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.c,{component:"form",onSubmit:async e=>{e.preventDefault();let t=[];if(c.length>0)try{const e=new FormData;c.forEach((t=>{e.append("files",t)}));t=(await k.c.post("https://rr6manila.com/api/upload",e)).data.files}catch(l){return void d("Failed to upload files.")}await p({variables:{id:n,message:o,files:t.map((e=>e.fileUrl))}}),i(),s(""),a([]),r()},children:(0,S.jsxs)(f.c,{spacing:2,children:[(0,S.jsx)(j.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:c.map((e=>(0,S.jsx)(B.c,{label:e.name,variant:"outlined",onDelete:()=>{return t=e.name,void a((e=>e.filter((e=>e.name!==t))));var t},sx:{mx:"5px"}},e.name)))}),(0,S.jsx)(I.c,{variant:"outlined",placeholder:"Report...",value:o,onChange:e=>s(e.target.value),multiline:!0,rows:3,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,S.jsx)(D.c,{position:"end",children:(0,S.jsx)(y.c,{title:"Insert File",children:(0,S.jsxs)(g.c,{component:"label",children:[(0,S.jsx)(b.ov,{icon:"material-symbols:attach-file-add-rounded"}),(0,S.jsx)("input",{type:"file",multiple:!0,hidden:!0,style:{display:"none"},onChange:e=>{const t=e.target.files;t&&a((e=>e.concat(function(e){const t=[];for(let n=0;n<e.length;n++){const i=e.item(n);i&&t.push(i)}return t}(t))))}})]})})})}}),(0,S.jsxs)(f.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:[(0,S.jsx)(v.c,{color:"inherit",onClick:r,children:"Cancel"}),(0,S.jsx)(v.c,{type:"submit",variant:"contained",color:"inherit",children:"Submit"})]})]})}),(0,S.jsx)(b.wR,{severity:"error",message:(null===u||void 0===u?void 0:u.message)||l})]})}var M=n(4480),E=n(3152);function F(e){let{reportId:t,open:n,onClose:u}=e;const[h,x]=(0,C.useState)(!0),{data:m,error:j,refetch:f}=(0,M.U)(N.uQ,{fetchPolicy:"no-cache",variables:{id:t}});return(0,C.useEffect)((()=>{m&&!m.getSubmittedReportById.message?x(!0):x(!1)}),[m]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(i.c,{open:n,onClose:u,maxWidth:"sm",fullWidth:!0,children:[(0,S.jsxs)(r.c,{component:"div",children:[(0,S.jsx)(p.c,{variant:"h4",children:null===m||void 0===m?void 0:m.getSubmittedReportById.report.name}),(0,S.jsx)(p.c,{variant:"body1",children:(0,E.parseType)(null===m||void 0===m?void 0:m.getSubmittedReportById.report.type)})]}),(0,S.jsxs)(o.c,{children:[(0,S.jsx)(l.c,{children:(0,S.jsx)(s.c,{size:"small","aria-label":"dense table",sx:{mb:2},children:(0,S.jsxs)(c.c,{children:[(0,S.jsxs)(d.c,{children:[(0,S.jsx)(a.c,{component:"th",scope:"row",children:(0,S.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Report Basis"})}),(0,S.jsx)(a.c,{children:(0,S.jsx)(p.c,{variant:"body2",children:null===m||void 0===m?void 0:m.getSubmittedReportById.report.basis})})]}),(0,S.jsxs)(d.c,{children:[(0,S.jsx)(a.c,{component:"th",scope:"row",children:(0,S.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Report Office"})}),(0,S.jsx)(a.c,{children:(0,S.jsx)(p.c,{variant:"body2",children:null===m||void 0===m?void 0:m.getSubmittedReportById.office.name})})]}),(0,S.jsxs)(d.c,{children:[(0,S.jsx)(a.c,{component:"th",scope:"row",children:(0,S.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Regional Deadline"})}),(0,S.jsx)(a.c,{children:(0,S.jsx)(p.c,{variant:"body2",children:m&&new Date(m.getSubmittedReportById.localDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]}),(0,S.jsxs)(d.c,{children:[(0,S.jsx)(a.c,{component:"th",scope:"row",children:(0,S.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"National Deadline"})}),(0,S.jsx)(a.c,{children:(0,S.jsx)(p.c,{variant:"body2",children:m&&new Date(m.getSubmittedReportById.nationalDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]})]})})}),m&&h?(0,S.jsx)(A,{content:m.getSubmittedReportById.message,reportId:parseInt(m.getSubmittedReportById.id),onReport:()=>f(),onCancel:()=>u()}):(0,S.jsx)(R,{message:null===m||void 0===m?void 0:m.getSubmittedReportById.message,files:null===m||void 0===m?void 0:m.getSubmittedReportById.files,onEdit:()=>x(!h),onClose:()=>u()})]})]}),(0,S.jsx)(b.wR,{severity:"error",message:null===j||void 0===j?void 0:j.message})]})}},5364:(e,t,n)=>{n.d(t,{c:()=>j});var i=n(5656),r=n(5072),o=n(9060),s=n(9736),c=n(1412),a=n(2556),l=n(3456),d=n(99),p=n(3448);function u(e){return(0,p.cp)("MuiCardActions",e)}(0,d.c)("MuiCardActions",["root","spacing"]);var h=n(2496);const x=["disableSpacing","className"],m=(0,a.cp)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,r.c)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),j=o.forwardRef((function(e,t){const n=(0,l.c)({props:e,name:"MuiCardActions"}),{disableSpacing:o=!1,className:a}=n,d=(0,i.c)(n,x),p=(0,r.c)({},n,{disableSpacing:o}),j=(e=>{const{classes:t,disableSpacing:n}=e,i={root:["root",!n&&"spacing"]};return(0,c.c)(i,u,t)})(p);return(0,h.jsx)(m,(0,r.c)({className:(0,s.c)(j.root,a),ownerState:p,ref:t},d))}))},6773:(e,t,n)=>{n.d(t,{c:()=>j});var i=n(5072),r=n(5656),o=n(9060),s=n(9736),c=n(1412),a=n(6880),l=n(2556),d=n(3456),p=n(2172),u=n(6432),h=n(2496);const x=["className","id"],m=(0,l.cp)(a.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),j=o.forwardRef((function(e,t){const n=(0,d.c)({props:e,name:"MuiDialogTitle"}),{className:a,id:l}=n,j=(0,r.c)(n,x),f=n,v=(e=>{const{classes:t}=e;return(0,c.c)({root:["root"]},p.G,t)})(f),{titleId:g=l}=o.useContext(u.c);return(0,h.jsx)(m,(0,i.c)({component:"h2",className:(0,s.c)(v.root,a),ownerState:f,ref:t,variant:"h6",id:null!=l?l:g},j))}))}}]);
//# sourceMappingURL=5.f8a9ddb6.chunk.js.map