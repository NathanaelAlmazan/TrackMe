"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[156],{2156:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(9060),c=r(2656),a=r(4488),i=r(7667),l=r(9e3),o=r(5448),s=r(8960),u=r(8320),d=r(6880),h=r(9344),p=r(4480),m=r(9732),g=r(3540),v=r(7868),f=r.n(v),I=r(2044),y=r(8964),j=r(5436),b=r(4296),x=r(2496);const D={subject:"",description:"",receivedFrom:"",typeId:"",purposeId:"",statusId:"",tag:""};function C(e){let{referenceNum:t,open:r,onClose:v}=e;const{data:C,error:P}=(0,p.U)(y.It,{fetchPolicy:"no-cache"}),{data:S,error:F}=(0,p.U)(j.yu,{fetchPolicy:"no-cache"}),{data:T,error:w}=(0,p.U)(j.SY,{fetchPolicy:"no-cache"}),{data:B,error:O}=(0,p.U)(j.oV,{fetchPolicy:"no-cache"}),{data:W,error:U,refetch:k}=(0,p.U)(j.kl,{fetchPolicy:"no-cache"}),[N,{error:R}]=(0,m.U)(j.WK,{fetchPolicy:"no-cache"}),[q,{error:L}]=(0,g.c)(j.Yx),[M,{error:Q}]=(0,g.c)(j.c3),[Y,A]=(0,n.useState)([]),[E,_]=(0,n.useState)(f()(new Date)),[K,V]=(0,n.useState)(D),{subject:z,description:G,receivedFrom:H,typeId:J,purposeId:X,statusId:Z,tag:$}=K;(0,n.useEffect)((()=>{t?N({variables:{referenceNum:t}}).then((e=>{let{data:t}=e;t&&(V({subject:t.getDocumentById.subject,description:t.getDocumentById.description,receivedFrom:t.getDocumentById.receivedFrom,typeId:t.getDocumentById.type?t.getDocumentById.type.id.toString():"",purposeId:t.getDocumentById.purpose?t.getDocumentById.purpose.id.toString():"",statusId:t.getDocumentById.status?t.getDocumentById.status.id.toString():"",tag:t.getDocumentById.tag?t.getDocumentById.tag:""}),_(f()(new Date(t.getDocumentById.dateDue))),A(t.getDocumentById.refferedTo.map((e=>parseInt(e.id)))))})):(V(D),_(f()(new Date)),A([]))}),[t,N]);const ee=e=>{V({...K,[e.target.name]:e.target.value})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.c,{open:r,onClose:v,maxWidth:"lg",fullWidth:!0,children:(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),t?await M({variables:{referenceNum:t,subject:z,description:G,receivedFrom:H,typeId:parseInt(J),purposeId:parseInt(X),statusId:parseInt(Z),tag:0===$.length?null:$,refferedTo:Y,dateDue:E.toISOString()}}):await q({variables:{subject:z,description:G,receivedFrom:H,typeId:parseInt(J),purposeId:parseInt(X),statusId:parseInt(Z),tag:0===$.length?null:$,refferedTo:Y,dateDue:E.toISOString()}}),V(D),_(f()(new Date)),A([]),await k(),v()},children:[(0,x.jsx)(a.c,{children:(0,x.jsxs)(o.cp,{container:!0,spacing:3,children:[(0,x.jsx)(o.cp,{item:!0,xs:12,children:W&&(0,x.jsx)(d.c,{variant:"h6",children:"#".concat(t||W.getTempReferenceNum)})}),(0,x.jsx)(o.cp,{item:!0,xs:12,sm:12,md:8,children:(0,x.jsxs)(s.c,{spacing:3,children:[(0,x.jsx)(u.c,{name:"subject",label:"Subject",variant:"outlined",value:z,onChange:ee,fullWidth:!0,required:!0}),(0,x.jsx)(u.c,{name:"description",label:"Description",variant:"outlined",value:G,onChange:ee,multiline:!0,rows:4,fullWidth:!0,required:!0}),(0,x.jsx)(u.c,{name:"receivedFrom",label:"Received From",variant:"outlined",value:H,onChange:ee,fullWidth:!0,required:!0}),C&&(0,x.jsx)(I.e,{name:"referredTo",label:"Referred To",selected:Y,options:C.getOffices.map((e=>({id:parseInt(e.id),label:e.name}))),onChange:e=>{A(e)}})]})}),(0,x.jsx)(o.cp,{item:!0,xs:12,sm:12,md:4,children:(0,x.jsxs)(s.c,{spacing:3,children:[B&&(0,x.jsx)(u.c,{name:"typeId",select:!0,label:"Document Type",value:J,onChange:ee,variant:"outlined",required:!0,fullWidth:!0,children:B.getDocumentTypes.map((e=>(0,x.jsx)(h.c,{value:e.id,children:e.label},e.id)))}),S&&(0,x.jsx)(u.c,{name:"purposeId",select:!0,label:"Document Purpose",value:X,onChange:ee,variant:"outlined",required:!0,fullWidth:!0,children:S.getDocumentPurposes.map((e=>(0,x.jsx)(h.c,{value:e.id,children:e.label},e.id)))}),T&&(0,x.jsx)(u.c,{name:"statusId",select:!0,label:"Document Status",value:Z,onChange:ee,variant:"outlined",required:!0,fullWidth:!0,children:T.getDocumentStatus.filter((e=>e.category===b.sD.NotStarted||e.category===b.sD.NotActionable||t)).map((e=>(0,x.jsx)(h.c,{value:e.id,children:e.label},e.id)))}),(0,x.jsx)(I.I4,{label:"Deadline",value:E,onChange:e=>{e&&_(e)}}),(0,x.jsxs)(u.c,{name:"tag",select:!0,label:"Document Tag",variant:"outlined",value:$,onChange:ee,fullWidth:!0,children:[(0,x.jsx)(h.c,{value:"",children:"None"}),(0,x.jsx)(h.c,{value:"CONFIDENTIAL",children:"Confidential"}),(0,x.jsx)(h.c,{value:"TOP_PRIORITY",children:"Top Prioroty"}),(0,x.jsx)(h.c,{value:"FOLLOW_UP",children:"Follow Up"})]})]})})]})}),(0,x.jsx)(i.c,{children:(0,x.jsxs)(s.c,{direction:"row",spacing:2,children:[(0,x.jsx)(l.c,{onClick:v,color:"inherit",children:"Cancel"}),(0,x.jsx)(l.c,{variant:"contained",color:"inherit",type:"submit",children:"Save"})]})})]})}),(0,x.jsx)(I.wR,{severity:"error",message:(null===P||void 0===P?void 0:P.message)||(null===F||void 0===F?void 0:F.message)||(null===L||void 0===L?void 0:L.message)||(null===Q||void 0===Q?void 0:Q.message)||(null===w||void 0===w?void 0:w.message)||(null===O||void 0===O?void 0:O.message)||(null===U||void 0===U?void 0:U.message)||(null===R||void 0===R?void 0:R.message)})]})}},9732:(e,t,r)=>{r.d(t,{U:()=>s});var n=r(7328),c=r(9528),a=r(2200),i=r(4480),l=r(3960),o=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function s(e,t){var r,s=c.useRef(),u=c.useRef(),d=c.useRef(),h=(0,a.I)(t,s.current||{}),p=null!==(r=null===h||void 0===h?void 0:h.query)&&void 0!==r?r:e;u.current=t,d.current=p;var m=(0,i.a)((0,l.y)(t&&t.client),p),g=m.useQuery((0,n.C3)((0,n.C3)({},h),{skip:!s.current})),v=g.observable.options.initialFetchPolicy||m.getDefaultFetchPolicy(),f=Object.assign(g,{called:!!s.current}),I=c.useMemo((function(){for(var e={},t=function(t){var r=f[t];e[t]=function(){return s.current||(s.current=Object.create(null),m.forceUpdateState()),r.apply(this,arguments)}},r=0,n=o;r<n.length;r++){t(n[r])}return e}),[]);Object.assign(f,I);var y=c.useCallback((function(e){s.current=e?(0,n.C3)((0,n.C3)({},e),{fetchPolicy:e.fetchPolicy||v}):{fetchPolicy:v};var t=(0,a.I)(u.current,(0,n.C3)({query:d.current},s.current)),r=m.executeQuery((0,n.C3)((0,n.C3)({},t),{skip:!1})).then((function(e){return Object.assign(e,I)}));return r.catch((function(){})),r}),[]);return[y,f]}}}]);
//# sourceMappingURL=156.6f248636.chunk.js.map