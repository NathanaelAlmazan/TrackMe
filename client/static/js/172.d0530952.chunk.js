"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[172],{9172:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(9060),o=n(8960),i=n(9e3),a=n(5548),c=n(6880),s=n(1712),l=n(3692),d=n(1584),u=n(3358),h=n(6768),x=n(5084),v=n(2496);function f(e){let{onRefresh:t,onFilter:n}=e;return(0,v.jsx)(h.c,{sx:{height:96,display:"flex",justifyContent:"flex-end",p:e=>e.spacing(0,1,0,3)},children:(0,v.jsxs)(o.c,{direction:"row",children:[(0,v.jsx)(u.c,{title:"Filter",children:(0,v.jsx)(a.c,{onClick:n,children:(0,v.jsx)(x.ov,{icon:"fluent:filter-20-filled"})})}),(0,v.jsx)(u.c,{title:"Refresh",children:(0,v.jsx)(a.c,{onClick:t,children:(0,v.jsx)(x.ov,{icon:"mdi:refresh"})})})]})})}var p=n(4296),m=n(4194),g=n(4480),b=n(3540),j=n(7976);const C=(0,r.lazy)((()=>Promise.all([n.e(448),n.e(45),n.e(848)]).then(n.bind(n,3848)))),w=(0,r.lazy)((()=>Promise.resolve().then(n.bind(n,8280))));function k(e,t){if(t)return e&&[p.QJ.Superuser,p.QJ.Director].includes(e)?void 0:parseInt(t)}function S(){const e=(0,m.eu)("up","lg","xl"),{office:t,role:n}=(0,m.Cq)((e=>e.auth)),[u,h]=(0,r.useState)(!1),[p,S]=(0,r.useState)(!1),[I,M]=(0,r.useState)([]),[R,D]=(0,r.useState)(null),[y,E]=(0,r.useState)(new Date),[W,O]=(0,r.useState)(new Date),{data:G,error:T,refetch:N}=(0,g.U)(j.UJ,{variables:{officeId:k(n,t),date:new Date(y).toISOString()}}),[L,{error:P}]=(0,b.c)(j.cx);(0,r.useEffect)((()=>{N({officeId:k(n,t),date:new Date(y).toISOString()})}),[y,n,t,N]);const U=(0,r.useMemo)((()=>G?G.getEvents.filter((e=>e.type&&I.includes(e.type)||0===I.length)):[]),[G,I]),_=()=>{h(!u),D(null),N({officeId:k(n,t),date:new Date(y).toISOString()})};return(0,v.jsxs)(s.c,{children:[(0,v.jsxs)(o.c,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,v.jsxs)(o.c,{direction:"row",alignItems:"center",justifyContent:"start",children:[(0,v.jsx)(a.c,{onClick:e=>{const t=new Date(y);t.setMonth(t.getMonth()-1),E(t)},children:(0,v.jsx)(x.ov,{icon:"uil:arrow-left"})}),(0,v.jsx)(c.c,{variant:"h4",children:new Date(y).toLocaleDateString(void 0,{month:"short",year:"numeric"}).toUpperCase()}),(0,v.jsx)(a.c,{onClick:e=>{const t=new Date(y);t.setMonth(t.getMonth()+1),E(t)},children:(0,v.jsx)(x.ov,{icon:"uil:arrow-right"})})]}),(0,v.jsxs)(o.c,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:[void 0===k(n,t)&&(0,v.jsx)(i.c,{onClick:_,variant:"contained",color:"inherit",startIcon:(0,v.jsx)(x.ov,{icon:"eva:plus-fill"}),children:"Create"}),(0,v.jsx)(d.gf,{document:(0,v.jsx)(x._M,{events:U,currentDate:y}),fileName:"".concat(new Date(y).toLocaleDateString(void 0,{month:"short",year:"numeric"}).toUpperCase(),".pdf"),children:t=>{let{url:n}=t;return n&&(e?(0,v.jsx)(i.c,{variant:"outlined",onClick:()=>window.open(n,"_blank"),startIcon:(0,v.jsx)(x.ov,{icon:"ant-design:export-outlined"}),sx:{color:"black",borderColor:"black"},children:"Export"}):(0,v.jsx)(i.c,{variant:"outlined",onClick:()=>window.open(n,"_blank"),sx:{color:"black",borderColor:"black"},children:(0,v.jsx)(x.ov,{icon:"ant-design:export-outlined"})}))}})]})]}),(0,v.jsxs)(l.c,{children:[(0,v.jsx)(f,{onRefresh:()=>N(),onFilter:()=>S(!p)}),(0,v.jsx)(x.Yf,{events:U,officeId:k(n,t),currentDate:y,selectedDate:W,onSelectDate:e=>O(e),onEditEvent:(e,t)=>{D(t),h(!0)},onDeleteEvent:async(e,r)=>{await L({variables:{id:r}}),N({officeId:k(n,t),date:new Date(y).toISOString()})}})]}),(0,v.jsx)(x.c1,{children:(0,v.jsx)(w,{open:p,selected:I,onFilter:e=>{const t=I.indexOf(e);let n=[];-1===t?n=n.concat(I,e):0===t?n=n.concat(I.slice(1)):t===I.length-1?n=n.concat(I.slice(0,-1)):t>0&&(n=n.concat(I.slice(0,t),I.slice(t+1))),M(n)},onClose:()=>S(!p),onClear:()=>M([]),filters:[{name:"Types",options:[{label:"Event",value:"EVENT"},{label:"HR Report",value:"HR_REPORT"},{label:"Admin Report",value:"ADMIN_REPORT"},{label:"Document",value:"DOCUMENT"}]}]})}),(0,v.jsx)(x.c1,{children:(0,v.jsx)(C,{eventId:R,selectedDate:W,open:u,onClose:_})}),(0,v.jsx)(x.wR,{severity:"error",message:(null===T||void 0===T?void 0:T.message)||(null===P||void 0===P?void 0:P.message)})]})}},1712:(e,t,n)=>{n.d(t,{c:()=>w});var r=n(5656),o=n(5072),i=n(9060),a=n(9736),c=n(5336),s=n(3448),l=n(1412),d=n(3596),u=n(7736),h=n(4276),x=n(2496);const v=["className","component","disableGutters","fixed","maxWidth","classes"],f=(0,h.c)(),p=(0,u.c)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,c.c)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),m=e=>(0,d.c)({props:e,name:"MuiContainer",defaultTheme:f});var g=n(5832),b=n(2556),j=n(3456);const C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=p,useThemeProps:n=m,componentName:d="MuiContainer"}=e,u=t((e=>{let{theme:t,ownerState:n}=e;return(0,o.c)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,o=t.breakpoints.values[r];return 0!==o&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(o).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,o.c)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})})),h=i.forwardRef((function(e,t){const i=n(e),{className:h,component:f="div",disableGutters:p=!1,fixed:m=!1,maxWidth:g="lg"}=i,b=(0,r.c)(i,v),j=(0,o.c)({},i,{component:f,disableGutters:p,fixed:m,maxWidth:g}),C=((e,t)=>{const{classes:n,fixed:r,disableGutters:o,maxWidth:i}=e,a={root:["root",i&&"maxWidth".concat((0,c.c)(String(i))),r&&"fixed",o&&"disableGutters"]};return(0,l.c)(a,(e=>(0,s.cp)(t,e)),n)})(j,d);return(0,x.jsx)(u,(0,o.c)({as:f,ownerState:j,className:(0,a.c)(C.root,h),ref:t},b))}));return h}({createStyledComponent:(0,b.cp)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,g.c)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,j.c)({props:e,name:"MuiContainer"})}),w=C},3540:(e,t,n)=>{n.d(t,{c:()=>d});var r=n(7328),o=n(9528),i=n(2200),a=n(3520),c=n(9179),s=n(4056),l=n(3960);function d(e,t){var n=(0,l.y)(null===t||void 0===t?void 0:t.client);(0,c.Y5)(e,c.UT.Mutation);var d=o.useState({called:!1,loading:!1,client:n}),u=d[0],h=d[1],x=o.useRef({result:u,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});Object.assign(x.current,{client:n,options:t,mutation:e});var v=o.useCallback((function(e){void 0===e&&(e={});var t=x.current,n=t.options,o=t.mutation,c=(0,r.C3)((0,r.C3)({},n),{mutation:o}),l=e.client||x.current.client;x.current.result.loading||c.ignoreResults||!x.current.isMounted||h(x.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:l});var d=++x.current.mutationId,u=(0,i.I)(c,e);return l.mutate(u).then((function(t){var n,r,o=t.data,i=t.errors,c=i&&i.length>0?new s._M({graphQLErrors:i}):void 0,v=e.onError||(null===(n=x.current.options)||void 0===n?void 0:n.onError);if(c&&v&&v(c,u),d===x.current.mutationId&&!u.ignoreResults){var f={called:!0,loading:!1,data:o,error:c,client:l};x.current.isMounted&&!(0,a.y)(x.current.result,f)&&h(x.current.result=f)}var p=e.onCompleted||(null===(r=x.current.options)||void 0===r?void 0:r.onCompleted);return c||null===p||void 0===p||p(t.data,u),t})).catch((function(t){var n;if(d===x.current.mutationId&&x.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:l};(0,a.y)(x.current.result,r)||h(x.current.result=r)}var o=e.onError||(null===(n=x.current.options)||void 0===n?void 0:n.onError);if(o)return o(t,u),{data:void 0,errors:t};throw t}))}),[]),f=o.useCallback((function(){if(x.current.isMounted){var e={called:!1,loading:!1,client:n};Object.assign(x.current,{mutationId:0,result:e}),h(e)}}),[]);return o.useEffect((function(){return x.current.isMounted=!0,function(){x.current.isMounted=!1}}),[]),[v,(0,r.C3)({reset:f},u)]}}}]);
//# sourceMappingURL=172.d0530952.chunk.js.map