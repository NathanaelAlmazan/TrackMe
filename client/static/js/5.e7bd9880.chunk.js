"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5],{8005:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var i=n(2656),r=n(6773),o=n(4488),s=n(3856),c=n(9504),a=n(700),l=n(9904),d=n(7454),p=n(6880),u=n(3692),h=n(4436),x=n(5364),m=n(7256),j=n(8960),f=n(9e3),g=n(2496);function v(e){const t=e.split("_");return t[t.length-1]}function y(e){let{message:t,files:n,onClose:i}=e;return(0,g.jsxs)(j.c,{spacing:2,children:[(0,g.jsxs)(u.c,{children:[(0,g.jsx)(h.c,{children:(0,g.jsx)(p.c,{variant:"body1",children:t})}),n&&n.length>0&&(0,g.jsx)(x.c,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,g.jsx)(m.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:n.map((e=>(0,g.jsx)(p.c,{component:"a",variant:"body2",href:e.trim(),target:"_blank",sx:{mx:"5px"},children:v(e)},e)))})})]}),(0,g.jsx)(j.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:(0,g.jsx)(f.c,{color:"inherit",onClick:i,children:"Close"})})]})}var b=n(9060),w=n(8320),S=n(5548),R=n(3358),C=n(9572),I=n(7532),D=n(4864),B=n(8372),k=n(3540),W=n(7976);function N(e){let{reportId:t,onReport:n,onCancel:i}=e;const[r,o]=(0,b.useState)(""),[s,c]=(0,b.useState)([]),[a,l]=(0,b.useState)(),[d,{error:p}]=(0,k.c)(W.aA);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.c,{component:"form",onSubmit:async e=>{e.preventDefault();let a=[];if(s.length>0)try{const e=new FormData;s.forEach((t=>{e.append("files",t)}));a=(await B.c.post("https://rr6manila.com/api/upload",e)).data.files}catch(p){return void l("Failed to upload files.")}await d({variables:{id:t,message:r,files:a.map((e=>e.fileUrl))}}),n(),o(""),c([]),i()},children:(0,g.jsxs)(j.c,{spacing:2,children:[(0,g.jsx)(m.c,{sx:{maxWidth:"100%",overflow:"auto",display:"flex",flexDirection:"row"},children:s.map((e=>(0,g.jsx)(I.c,{label:e.name,variant:"outlined",onDelete:()=>{return t=e.name,void c((e=>e.filter((e=>e.name!==t))));var t},sx:{mx:"5px"}},e.name)))}),(0,g.jsx)(w.c,{variant:"outlined",placeholder:"Report...",value:r,onChange:e=>o(e.target.value),multiline:!0,rows:3,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,g.jsx)(C.c,{position:"end",children:(0,g.jsx)(R.c,{title:"Insert File",children:(0,g.jsxs)(S.c,{component:"label",children:[(0,g.jsx)(D.ov,{icon:"material-symbols:attach-file-add-rounded"}),(0,g.jsx)("input",{type:"file",multiple:!0,hidden:!0,style:{display:"none"},onChange:e=>{const t=e.target.files;t&&c((e=>e.concat(function(e){const t=[];for(let n=0;n<e.length;n++){const i=e.item(n);i&&t.push(i)}return t}(t))))}})]})})})}}),(0,g.jsxs)(j.c,{direction:"row",spacing:2,alignItems:"end",justifyContent:"flex-end",children:[(0,g.jsx)(f.c,{color:"inherit",onClick:i,children:"Cancel"}),(0,g.jsx)(f.c,{type:"submit",variant:"contained",color:"inherit",children:"Submit"})]})]})}),(0,g.jsx)(D.wR,{severity:"error",message:(null===p||void 0===p?void 0:p.message)||a})]})}var A=n(4480),M=n(3152);function F(e){let{reportId:t,open:n,onClose:u}=e;const{data:h,error:x,refetch:m}=(0,A.U)(W.uQ,{fetchPolicy:"no-cache",variables:{id:t}});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(i.c,{open:n,onClose:u,maxWidth:"sm",fullWidth:!0,children:[(0,g.jsxs)(r.c,{component:"div",children:[(0,g.jsx)(p.c,{variant:"h4",children:null===h||void 0===h?void 0:h.getSubmittedReportById.report.name}),(0,g.jsx)(p.c,{variant:"body1",children:(0,M.parseType)(null===h||void 0===h?void 0:h.getSubmittedReportById.report.type)})]}),(0,g.jsxs)(o.c,{children:[(0,g.jsx)(l.c,{children:(0,g.jsx)(s.c,{size:"small","aria-label":"dense table",sx:{mb:2},children:(0,g.jsxs)(c.c,{children:[(0,g.jsxs)(d.c,{children:[(0,g.jsx)(a.c,{component:"th",scope:"row",children:(0,g.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Report Basis"})}),(0,g.jsx)(a.c,{children:(0,g.jsx)(p.c,{variant:"body2",children:null===h||void 0===h?void 0:h.getSubmittedReportById.report.basis})})]}),(0,g.jsxs)(d.c,{children:[(0,g.jsx)(a.c,{component:"th",scope:"row",children:(0,g.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Report Office"})}),(0,g.jsx)(a.c,{children:(0,g.jsx)(p.c,{variant:"body2",children:null===h||void 0===h?void 0:h.getSubmittedReportById.office.name})})]}),(0,g.jsxs)(d.c,{children:[(0,g.jsx)(a.c,{component:"th",scope:"row",children:(0,g.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"Regional Deadline"})}),(0,g.jsx)(a.c,{children:(0,g.jsx)(p.c,{variant:"body2",children:h&&new Date(h.getSubmittedReportById.localDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]}),(0,g.jsxs)(d.c,{children:[(0,g.jsx)(a.c,{component:"th",scope:"row",children:(0,g.jsx)(p.c,{variant:"subtitle2",noWrap:!0,children:"National Deadline"})}),(0,g.jsx)(a.c,{children:(0,g.jsx)(p.c,{variant:"body2",children:h&&new Date(h.getSubmittedReportById.nationalDue).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",weekday:"short"})})})]})]})})}),h&&!h.getSubmittedReportById.message&&(0,g.jsx)(N,{reportId:parseInt(h.getSubmittedReportById.id),onReport:()=>m(),onCancel:()=>u()}),h&&h.getSubmittedReportById.message&&(0,g.jsx)(y,{message:h.getSubmittedReportById.message,files:h.getSubmittedReportById.files,onClose:()=>u()})]})]}),(0,g.jsx)(D.wR,{severity:"error",message:null===x||void 0===x?void 0:x.message})]})}},5364:(e,t,n)=>{n.d(t,{c:()=>j});var i=n(5656),r=n(5072),o=n(9060),s=n(9736),c=n(1412),a=n(2556),l=n(3456),d=n(99),p=n(3448);function u(e){return(0,p.cp)("MuiCardActions",e)}(0,d.c)("MuiCardActions",["root","spacing"]);var h=n(2496);const x=["disableSpacing","className"],m=(0,a.cp)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,r.c)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),j=o.forwardRef((function(e,t){const n=(0,l.c)({props:e,name:"MuiCardActions"}),{disableSpacing:o=!1,className:a}=n,d=(0,i.c)(n,x),p=(0,r.c)({},n,{disableSpacing:o}),j=(e=>{const{classes:t,disableSpacing:n}=e,i={root:["root",!n&&"spacing"]};return(0,c.c)(i,u,t)})(p);return(0,h.jsx)(m,(0,r.c)({className:(0,s.c)(j.root,a),ownerState:p,ref:t},d))}))},6773:(e,t,n)=>{n.d(t,{c:()=>j});var i=n(5072),r=n(5656),o=n(9060),s=n(9736),c=n(1412),a=n(6880),l=n(2556),d=n(3456),p=n(2172),u=n(6432),h=n(2496);const x=["className","id"],m=(0,l.cp)(a.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),j=o.forwardRef((function(e,t){const n=(0,d.c)({props:e,name:"MuiDialogTitle"}),{className:a,id:l}=n,j=(0,r.c)(n,x),f=n,g=(e=>{const{classes:t}=e;return(0,c.c)({root:["root"]},p.G,t)})(f),{titleId:v=l}=o.useContext(u.c);return(0,h.jsx)(m,(0,i.c)({component:"h2",className:(0,s.c)(g.root,a),ownerState:f,ref:t,variant:"h6",id:null!=l?l:v},j))}))}}]);
//# sourceMappingURL=5.e7bd9880.chunk.js.map