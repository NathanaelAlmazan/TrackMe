"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[460],{5460:(e,a,i)=>{i.r(a),i.d(a,{default:()=>N});var t=i(9060),s=i(2656),o=i(6773),r=i(4488),l=i(7667),n=i(9e3),d=i(8960),c=i(8320),f=i(9344),u=i(5548),m=i(9572),v=i(4924),p=i(4480),h=i(9732),g=i(3540),x=i(8964),I=i(2496);const j={firstName:"",lastName:"",positionId:"",officeId:"",password:""};function N(e){var a,i;let{open:N,onClose:y,officerId:b}=e;const[w,C]=(0,t.useState)(),[O,S]=(0,t.useState)(!1),[B,W]=(0,t.useState)(j),{firstName:k,lastName:q,positionId:P,officeId:R,password:D}=B,{data:F,error:T}=(0,p.U)(x.mq),{data:U,error:A}=(0,p.U)(x.It),[E,{data:G,error:M}]=(0,h.U)(x.mG),[K,{error:L}]=(0,g.c)(x.uQ),[Q,{error:z}]=(0,g.c)(x.Kg),H=e=>{W({...B,[e.target.name]:e.target.value})};(0,t.useEffect)((()=>{b&&E({variables:{uuid:b}}).then((e=>{let{data:a}=e;var i,t;a&&a.getOfficerById&&W({firstName:a.getOfficerById.firstName,lastName:a.getOfficerById.lastName,positionId:(null===(i=a.getOfficerById.position)||void 0===i?void 0:i.id.toString())||"",officeId:(null===(t=a.getOfficerById.office)||void 0===t?void 0:t.id.toString())||"",password:""})}))}),[b,E]);const J=()=>{W(j),y()};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(s.c,{open:N,onClose:J,maxWidth:"sm",fullWidth:!0,children:[(0,I.jsx)(o.c,{children:G?"Edit ".concat((null===(a=G.getOfficerById)||void 0===a?void 0:a.firstName)+" "+(null===(i=G.getOfficerById)||void 0===i?void 0:i.lastName)," Profile"):"Create Officer"}),(0,I.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b){const e=await Q({variables:{uuid:b,firstName:k,lastName:q,positionId:parseInt(P),officeId:parseInt(R)}});e.data&&e.data.updateOfficer?y():C("Failed to update account.")}else{const e=await K({variables:{firstName:k,lastName:q,positionId:parseInt(P),officeId:parseInt(R),password:D}});e.data&&e.data.createOfficer?y():C("Account already exists.")}W(j)},children:[(0,I.jsx)(r.c,{children:(0,I.jsxs)(d.c,{spacing:2,sx:{mb:3},children:[(0,I.jsx)(c.c,{name:"firstName",label:"First Name",value:k,onChange:H,required:!0,fullWidth:!0}),(0,I.jsx)(c.c,{name:"lastName",label:"Last Name",value:q,onChange:H,required:!0,fullWidth:!0}),F&&(0,I.jsx)(c.c,{name:"positionId",select:!0,label:"Position",value:P,onChange:H,required:!0,fullWidth:!0,children:F.getPositions.map((e=>(0,I.jsx)(f.c,{value:e.id,children:e.label},e.id)))}),U&&(0,I.jsx)(c.c,{name:"officeId",select:!0,label:"Office",value:R,onChange:H,required:!0,fullWidth:!0,children:U.getOffices.map((e=>(0,I.jsx)(f.c,{value:e.id,children:e.name},e.id)))}),!b&&(0,I.jsx)(c.c,{name:"password",label:"Temporary Password",type:O?"text":"password",value:D,onChange:H,required:!0,fullWidth:!0,InputProps:{endAdornment:(0,I.jsx)(m.c,{position:"end",children:(0,I.jsx)(u.c,{onClick:()=>S(!O),edge:"end",children:(0,I.jsx)(v.ov,{icon:O?"eva:eye-fill":"eva:eye-off-fill"})})})}})]})}),(0,I.jsxs)(l.c,{children:[(0,I.jsx)(n.c,{onClick:J,color:"inherit",children:"Cancel"}),(0,I.jsx)(n.c,{type:"submit",variant:"contained",color:"inherit",children:"Save"})]})]})]}),(0,I.jsx)(v.wR,{severity:"error",message:(null===T||void 0===T?void 0:T.message)||(null===A||void 0===A?void 0:A.message)||(null===M||void 0===M?void 0:M.message)||(null===L||void 0===L?void 0:L.message)||w||(null===z||void 0===z?void 0:z.message)})]})}},6773:(e,a,i)=>{i.d(a,{c:()=>h});var t=i(5072),s=i(5656),o=i(9060),r=i(9736),l=i(1412),n=i(6880),d=i(2556),c=i(3456),f=i(2172),u=i(6432),m=i(2496);const v=["className","id"],p=(0,d.cp)(n.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,a)=>a.root})({padding:"16px 24px",flex:"0 0 auto"}),h=o.forwardRef((function(e,a){const i=(0,c.c)({props:e,name:"MuiDialogTitle"}),{className:n,id:d}=i,h=(0,s.c)(i,v),g=i,x=(e=>{const{classes:a}=e;return(0,l.c)({root:["root"]},f.G,a)})(g),{titleId:I=d}=o.useContext(u.c);return(0,m.jsx)(p,(0,t.c)({component:"h2",className:(0,r.c)(x.root,n),ownerState:g,ref:a,variant:"h6",id:null!=d?d:I},h))}))}}]);
//# sourceMappingURL=460.5403359c.chunk.js.map